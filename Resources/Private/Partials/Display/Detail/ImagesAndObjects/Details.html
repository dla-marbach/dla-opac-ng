{namespace v=FluidTYPO3\vhs\ViewHelpers}
{namespace slub=Slub\SlubFindExtend\ViewHelpers}
{namespace dla=Dla\DlaOpacNg\ViewHelpers}
{namespace s=Subugoe\Find\ViewHelpers}


<div class="ctg-detailview-head">
    <div class="ctg-dvh-main">
        <div class="ctg-ri-icon">
            <f:render partial="Display/Detail/MediatypeIcon" arguments="{listview_type:document.listview_type, listview_type_cardinality:document.listview_type_cardinality}" />
        </div>
        <div class="ctg-ri-text">
            <h2>
                {document.listview_title}
            </h2>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_associate,
                            separator:'; '
                    }"/>
                </f:if>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}"></f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional1)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional1,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional2)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional2,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
        </div>
        <div class="ctg-ri-image">

        </div>
    </div>

    <f:render partial="Display/Detail/DetailButtons" arguments="{_all}"/>
</div>

<div class="ctg-detailview-media">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'picture_midi')}" name="picture_midi" />
    <f:if condition="{picture_midi.0}">
        <div class="image-container">
            <img src="{picture_midi.0}" alt="">
        </div>
    </f:if>
</div>


<div class="ctg-detailview-tabs">

    <ul class="ctg-dtvt-menu" id="tabbed">
        <li>
            <a href="#tabdetail" id="tabdetail" class="ctg-dtvt-menu-active">
                <span>
                    <f:translate key='Details' extensionName='dla_opac_ng'/>
                </span>
            </a>
        </li>
        <li>
            <a href="#tabaccess" id="tabaccess">
                <span>
                    <f:translate key='Zugang' extensionName='dla_opac_ng'/>
                </span>
            </a>
        </li>
    </ul>

    <div id="access" class="ctg-dtvt-details" style="display: none;">

        <f:render partial="Display/Detail/AccessExemplar/Exemplar" arguments="{_all}"/>

    </div>

    <div id="detail" class="ctg-dtvt-details">

        <f:comment>
            Mediatype
        </f:comment>
        <div class="ctg-dtvt-row">
            <div class="ctg-dtvt-label">
                <f:translate key='Medienart' extensionName='dla_opac_ng'/>
            </div>
            <div class="ctg-dtvt-content">
                <f:render
                    partial="Display/Field/List"
                    arguments="{
                        document:document,
                        results:results,
                        field:'listview_type',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                     }"/>
            </div>
        </div>

        <f:comment>
            Objecttype
            IF B51400  = "Anderes Objekt" OR "Anderes Konvolut" THEN B51410
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B51400')}" name="B51400" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B51410')}" name="B51410" />
        <f:if condition="{B51400} == 'Anderes Objekt' || {B51400} == 'Anderes Konvolut'">
            <f:then>
                <v:variable.set value="B51410" name="fieldName" />
                <v:variable.set value="{B51410}" name="fieldValue" />
            </f:then>
            <f:else>
                <v:variable.set value="B51400" name="fieldName" />
                <v:variable.set value="{B51400}" name="fieldValue" />
            </f:else>
        </f:if>

        <f:if condition="{fieldValue}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Objekttyp' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field:fieldName,
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                      }"/>
                    </div>
                </div>
            </f:then>
        </f:if>

        <f:comment>
            Titel
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B51800')}" name="B51800" />
        <f:if condition="{B51800}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Titel' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                                document:document,
                                results:results,
                                field:'B51800',
                                linkFieldContent:linkFieldContent,
                                linkFacets:linkFacets
                        }"/>

                    </div>
                </div>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>

        <f:comment>
            Original title
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B51801')}" name="B51801" />
        <f:if condition="{B51801}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Originaltitel' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'B51801',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>

        <f:comment>
            Person
        </f:comment>
        <f:if condition="
                {s:data.valueForKey(array:document.fields, key:'XX_PE_listview_title_PEE100')} ||
                {s:data.valueForKey(array:document.fields, key:'XX_PE_listview_title_PEU100')} ||
                {s:data.valueForKey(array:document.fields, key:'XX_PE_listview_title_PEA100')} ||
                {s:data.valueForKey(array:document.fields, key:'XX_PE_listview_title_PE0100')}
            ">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Person' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'PEE100',
                            fieldToDisplay: 'XX_PE_listview_title_PEE100',
                            fieldNames: '{0:\'XX_PE_listview_title_PEE100\', 1:\'GFUPUE\', 2:\'PERPOS\'}',
                            fieldWraps: '{0:\'%s\',1:\'[%s]\',2:\'(%s)\'}'
                        }"
                        />

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'PE0100',
                            fieldToDisplay: 'XX_PE_listview_title_PE0100',
                            fieldNames: '{0:\'XX_PE_listview_title_PE0100\', 1:\'GFUPER\', 2:\'AFUPER\'}',
                            fieldWraps: '{0:\'%s\',1:\'[%s]\',2:\'(%s)\'}'
                        }"
                        />

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'PEA100',
                            fieldToDisplay: 'XX_PE_listview_title_PEA100',
                            fieldNames: '{0:\'XX_PE_listview_title_PEA100\'}',
                            fieldWraps: '{0:\'%s [Widmungsempfänger/in]\'}'
                        }"
                        />

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'PEU100',
                            fieldToDisplay: 'XX_PE_listview_title_PEU100',
                            fieldNames: '{0:\'XX_PE_listview_title_PEU100\'}',
                            fieldWraps: '{0:\'%s [Vorbesitzer/in]\'}'
                        }"
                        />


                    </div>
                </div>
            </f:then>
        </f:if>

        <f:comment>
            Körperschaft
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_KS_K0800_KSE200')}" name="XX_KS_K0800_KSE200" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_KS_K0800_KSC200')}" name="XX_KS_K0800_KSC200" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_KS_K0800_KSA200')}" name="XX_KS_K0800_KSA200" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_KS_K0800_KSU200')}" name="XX_KS_K0800_KSU200" />
        <f:if condition="{XX_KS_K0800_KSE200} || {XX_KS_K0800_KSC200} || {XX_KS_K0800_KSA200} || {XX_KS_K0800_KSU200}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Körperschaft' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'KSE200',
                            fieldToDisplay: 'XX_KS_K0800_KSE200',
                            fieldNames: '{0:\'XX_KS_K0800_KSE200\', 1:\'GFUKSE\', 2:\'AFUKSE\'}',
                            fieldWraps: '{0:\'%s\',1:\'[%s]\',2:\'(%s)\'}'
                        }"
                        />

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'KSC200',
                            fieldToDisplay: 'XX_KS_K0800_KSC200',
                            fieldNames: '{0:\'XX_KS_K0800_KSC200\', 1:\'AFUKS\'}',
                            fieldWraps: '{0:\'%s [Urheber/in]\',1:\'(%s)\'}'
                        }"
                        />

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'KSA200',
                            fieldToDisplay: 'XX_KS_K0800_KSA200',
                            fieldNames: '{0:\'XX_KS_K0800_KSA200\'}',
                            fieldWraps: '{0:\'%s [Widmungsempfänger/in]\'}'
                        }"
                        />

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'KSU200',
                            fieldToDisplay: 'XX_KS_K0800_KSU200',
                            fieldNames: '{0:\'XX_KS_K0800_KSU200\'}',
                            fieldWraps: '{0:\'%s [Vorbesitzer/in]\'}'
                        }"
                        />

                    </div>
                </div>
            </f:then>
        </f:if>

        <f:comment>
            Allgemeine Beschreibung
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B00140')}" name="B00140" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52010')}" name="B52010" />
        <f:if condition="{B00140} == 'Konvolut'">
            <f:if condition="{B52010}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key='Allgemeine Beschreibung' extensionName='dla_opac_ng'/>
                        </div>
                        <div class="ctg-dtvt-content">

                            <dla:replaceBreaks text="{B52010}" as="B52010" />
                            <f:format.raw>
                                {B52010}
                            </f:format.raw>

                        </div>
                    </div>
                </f:then>
            </f:if>
        </f:if>

        <f:comment>
            Entstehungszeit
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02040')}" name="B02040" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B0204A')}" name="B0204A" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02000')}" name="B02000" />
        <f:if condition="{B02040} || {B0204A}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Entstehungszeit' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:if condition="{B02040}">
                            {B02040}
                            <f:if condition="{B02000.0}">
                                <f:if condition="{B02000.0}!='#NV'">
                                    ({B02000.0})
                                </f:if>
                            </f:if>
                            <br />
                        </f:if>

                        <f:if condition="{B0204A}">
                            {B0204A}
                            <f:if condition="{B02000.1}">
                                <f:if condition="{B02000.1}!='#NV'">
                                    ({B02000.1})
                                </f:if>
                            </f:if>
                        </f:if>

                    </div>
                </div>
            </f:then>
        </f:if>

        <f:comment>
            Bezeichnung
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52020')}" name="B52020" />
        <f:if condition="{B52020}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Bezeichnung' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'B52020',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>

        <f:comment>
            Technik
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B00140')}" name="B00140" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52010')}" name="B52010" />
        <f:if condition="{B00140} == 'Einzelobjekt'">
            <f:if condition="{B52010}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key='Technik' extensionName='dla_opac_ng'/>
                        </div>
                        <div class="ctg-dtvt-content">

                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                            document:document,
                            results:results,
                            field:'B52010',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                        </div>
                    </div>
                </f:then>
            </f:if>
        </f:if>

        <f:comment>
            Umfang
        </f:comment>
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02050')}" name="B02050" />
        <f:if condition="{B02050}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Umfang' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'B02050',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52001')}" name="height" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52002')}" name="width" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52003')}" name="depth" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52004')}" name="diameter" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52011')}" name="B52011" />
        <f:if condition="{height} || {width} || {depth} || {diameter} || {B52011}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Maße [in cm]' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <dla:dimension height="{height}" width="{width}" depth="{depth}" diameter="{diameter}" description="{B52011}" as="dimension"/>

                        <f:for each="{dimension}" as="field" iteration="iterator">
                            <div>{field}</div>
                        </f:for>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B01610')}" name="B01610" />
        <f:if condition="{B01610}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Erhaltungszustand' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'B01610',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B51430')}" name="B51430" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B51420')}" name="B51420" />

        <f:if condition="{B51420}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Objekttypen' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:for each="{B51420}" as="type" iteration="type_iterator">
                            <f:if condition="{type} == 'Anderes Objekt'">
                                <f:then>
                                    {B51430} <br/>
                                </f:then>
                                <f:else>
                                    {B51420.{type_iterator.index}} <br/>
                                </f:else>
                            </f:if>
                        </f:for>

                    </div>
                </div>
            </f:then>
        </f:if>



        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AK_TITREG_AKY526')}" name="XX_AK_TITREG_AKY526" />
        <f:if condition="{XX_AK_TITREG_AKY526}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Werk' extensionName='dla_opac_ng'/>
                    </div>

                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'AKY526',
                            fieldToDisplay: 'XX_AK_TITREG_AKY526',
                            fieldNames: '{0:\'XX_AK_TITREG_AKY526\'}',
                            fieldWraps: '{0:\'%s\'}'
                        }"
                        />

                    </div>
                </div>
            </f:then>
        </f:if>


        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_TH_SWVF_THA720')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Ort' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'THA720',
                            fieldToDisplay: 'XX_TH_SWVF_THA720',
                            fieldNames: '{0:\'XX_TH_SWVF_THA720\',1:\'GFORT\',2:\'AFORT\'}',
                            fieldWraps: '{0:\'%s\',1:\'[%s]\',2:\'(%s)\'}'
                        }"
                        />
                    </div>
                </div>
            </f:then>
        </f:if>


        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_TH_SWVF_THA710')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Sachschlagwort' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'THA710',
                            fieldToDisplay: 'XX_TH_SWVF_THA710',
                            fieldNames: '{0:\'XX_TH_SWVF_THA710\',1:\'GFSWVF\'}',
                            fieldWraps: '{0:\'%s\', 1:\'[%s]\'}'
                        }"
                        />

                    </div>
                </div>
            </f:then>
        </f:if>


        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_BF_B41600_BFKEY')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Bestand' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'BFKEY',
                            fieldToDisplay: 'XX_BF_B41600_BFKEY',
                            fieldNames: '{0:\'XX_BF_B41600_BFKEY\'}',
                            fieldWraps: '{0:\'%s\'}'
                        }"
                        />

                    </div>
                </div>
            </f:then>
        </f:if>


        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_AU_AKKEY_AUKEY')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Buchexemplar' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field: 'XX_AU_AKKEY_AUKEY',
                        linkFieldContent:1,
                        linkFacets:linkFacets
                    }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_AK_A0331_AKA451')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Bibliothek' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field: 'AKA451',
                        linkFieldContent:1,
                        linkFacets:linkFacets,
                        linkTexts:XX_AK_A0331_AKA451
                    }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_HS_H41800_HSKEY')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Handschriften' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'HSKEY',
                            fieldToDisplay: 'XX_HS_H41800_HSKEY',
                            fieldNames: '{0:\'XX_HS_H41800_HSKEY\'}',
                            fieldWraps: '{0:\'%s\'}'
                        }"
                        />

                    </div>
                </div>
            </f:then>
        </f:if>



        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52030')}" name="B52030" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02630')}" name="B02630" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B52007')}" name="B52007" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B01660')}" name="B01660" />
        <v:variable.set value="{0:'{B52030}',1:'{B02630}',2:'{B52007}', 3:'{B01660}'}" name="valueArray" />
        <dla:arrayRemoveNull array="{valueArray}" as="valueArrayCleaned"/>
        <f:if condition="{valueArrayCleaned}">
            <div class="ctg-dtvt-row">
                <div class="ctg-dtvt-label">
                    <f:translate key='Anmerkungen' extensionName='dla_opac_ng'/>
                </div>
                <div class="ctg-dtvt-content">
                    <f:for each="{valueArrayCleaned}" as="value" iteration="iterator">
                        {value}
                        <f:if condition="{iterator.isLast} != 1">
                            <hr/>
                        </f:if>
                    </f:for>
                </div>
            </div>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B01630')}" name="B01630" />
        <f:if condition="{B01630}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Literatur' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'B01630',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'BIOKEY')}" name="BIOKEY" />
        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_BI_B51800_BIOKEY')}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='In' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Detail/LookupLink"
                                arguments="{
                            document:document,
                            results:results,
                            field:'BIOKEY',
                            fieldToDisplay: 'XX_BI_B51800_BIOKEY',
                            fieldNames: '{0:\'XX_BI_B51800_BIOKEY>\'}',
                            fieldWraps: '{0:\'%s\'}'
                        }"
                        />
                        <slub:data.fromSolr
                                query="id:BI{BIOKEY}"
                                fields="B51400"
                                rows="10">
                            ({solr.B51400})
                        </slub:data.fromSolr>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B04000')}" name="B04000" />
        <f:if condition="{B04000}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Inventarnummer' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'B04000',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_BE_E05080_BEKEY')}" name="XX_BE_E05080_BEKEY" />
        <f:if condition="{XX_BE_E05080_BEKEY}">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Erwerbungsnummer' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                            document:document,
                            results:results,
                            field:'XX_BE_E05080_BEKEY',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                    </div>
                </div>
            </f:then>
        </f:if>


        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'picture_midi')}" name="picture_midi" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B04100')}" name="B04100" />
        <f:if condition="{picture_midi} || {B04100} ">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Digitales Objekt' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:for each="{picture_midi}" as="pic" iteration="iterator">
                            <div class="detail-do-image">
                                <image src="{pic}"/>
                            </div>
                            <f:if condition="{B04100.{iterator.index}}!='#NV'">
                                <span class="detail-do-description">
                                    <v:variable.get name="B04100.{iterator.index}" />
                                </span>
                            </f:if>
                        </f:for>
                        <f:comment><f:render
                                partial="Display/Field/ImageList"
                                arguments="{
                            document:document,
                            results:results,
                            field:'picture_midi',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>

                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                            document:document,
                            results:results,
                            field:'B04100',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>
                        </f:comment>

                    </div>
                </div>
            </f:then>
        </f:if>

        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOPFAD_INDKEY')}" name="XX_MM_MOPFAD_INDKEY" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B00140')}" name="B00140" />

        <f:if condition="{B00140}=='Konvolut'">
            <f:if condition="{XX_MM_MOPFAD_INDKEY} || {XX_MM_MOTITL_INDKEY} ">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key='Inhalt' extensionName='dla_opac_ng'/>
                        </div>
                        <div class="ctg-dtvt-content">

                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                document:document,
                                results:results,
                                field:'XX_MM_MOPFAD_INDKEY',
                                linkFieldContent:linkFieldContent,
                                linkFacets:linkFacets
                              }"/>

                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                document:document,
                                results:results,
                                field:'XX_MM_MOTITL_INDKEY',
                                linkFieldContent:linkFieldContent,
                                linkFacets:linkFacets
                              }"/>

                        </div>
                    </div>
                </f:then>
            </f:if>
        </f:if>

        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AUSTAT')}" name="AUSTAT" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'KLASS')}" name="KLASS" />
        <f:if condition="{AUSTAT} || {KLASS} ">
            <f:then>
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        <f:translate key='Benutzung' extensionName='dla_opac_ng'/>
                    </div>
                    <div class="ctg-dtvt-content">

                        <f:if condition="{AUSTAT} != 'Am Standort' || {KLASS} == 'beschränkt benutzbar'">
                            <f:then>
                                Beschränkt benutzbar. Bitte 3 Wochen im Voraus bestellen!
                            </f:then>
                            <f:else>
                                <f:if condition="{KLASS} == 'nicht benutzbar'">
                                    <f:then>
                                        Nicht benutzbar
                                    </f:then>
                                    <f:else>
                                        {AUSTAT}
                                    </f:else>
                                </f:if>
                            </f:else>
                        </f:if>

                    </div>
                </div>
            </f:then>
        </f:if>

        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B00001')}" name="B00001" />

        <s:data.newArray
                name="query"
                global="1"
                keys="{0:'relation_inside_biokey'}"
                values="{0:'{B00001}'}"
        />

        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
        <dla:countFromSolr query="{solvedQuery}" />
        <f:if condition="{solrcount} > 0">
            <dt class="dt-{field}">
                <f:translate key='Darin' extensionName='dla_opac_ng'/>
            </dt>
            <dd class="dd-{field}">
                <f:link.action action="index" arguments="{q:query, sort:'AA425 desc'}" class="internal" noCacheHash="1">
                    <span>Darin {solrcount} Objekte</span>
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                              config:config,
                              results:results,
                              document:solr,
                              field:'{displayField}'
                            }"/>
                </f:link.action>
            </dd>
        </f:if>

    </div>
</div>
