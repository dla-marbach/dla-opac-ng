{namespace dla=Dla\DlaOpacNg\ViewHelpers}
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'source')}" name="source" />

<f:if condition="!{iterator.index}">
    <v:variable.set value="{index: '0'}" name="iterator" />
</f:if>

<f:switch expression="{source}">
    <f:case value="AK">
        <div class="ctg-dtvt-row row-{AUKEY.{iterator.index}} aukey-row-info">
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_KLASS_AUKEY')}" name="XX_AU_KLASS_AUKEY" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_STAND_AUKEY')}" name="XX_AU_STAND_AUKEY" />

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AUKEY')}" name="AUKEY" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'DOKTYP')}" name="DOKTYP" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'POS113')}" name="POS113" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0544')}" name="A0544" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'listview_type')}" name="listview_type" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'facet_source')}" name="facet_source" />

            <f:if condition="{XX_AU_KLASS_AUKEY.{iterator.index}}=='nicht benutzbar' || {XX_AU_STAND_AUKEY.{iterator.index}}=='nicht im Bestand des DLA'
            || {AUKEY}=='' && {POS113}!='Einzelbestandteil / unselbständiges Werk'
            || {AUKEY}=='' && {DOKTYP}=='Zeitschriftenheft'
            || {A0544.{iterator.index}}=='Nicht im Bestand des DLA' || {A0544.{iterator.index}}=='kein Bestand'
            || {facet_source}=='Digitale Nachschlagewerke' || {facet_source}=='Elektronische Zeitschriftenbibliothek'
            || {listview_type}=='Daten'">
                <f:then>
                    <div style="padding: 0.5rem 0;">
                        <span class="ctg-button" style="background-color: #dadada;color: #747474;padding-bottom: 10px;padding-left: 6px;padding-right: 6px;padding-top:10px;">
                            <f:translate key="Nicht bestellbar" extensionName="dla_opac_ng"/>
                        </span>
                        <span class="icon bel-kreis02" style="color:#cf2a0e;margin-left: 3px;"></span>
                    </div>
                </f:then>
                <f:else>
                    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                    <f:if condition="{detail_restrictions}">
                        <f:then>

                            <dla:replaceBreaks text="{detail_restrictions.{iterator.index}}" as="restriction"/>

                            <f:if condition="{v:format.substring(content: '{restriction}', start: 0, length: 17)}=='bedingt benutzbar'">
                                <f:then>
                                    <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                        <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                        <span class="icon bel-kreis02" style="color:#df661e;"></span>
                                    </div>
                                </f:then>
                                <f:else>
                                    <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                        <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                        <span class="icon bel-kreis02" style="color:#00df27;"></span>
                                    </div>
                                </f:else>
                            </f:if>
                        </f:then>
                        <f:else>
                            <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                <span class="icon bel-kreis02" style="color:#00df27;"></span>
                            </div>
                        </f:else>
                    </f:if>

                </f:else>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'listview_title')}" name="listview_title" />

            <div class="ctg-dtvt-content">
                <f:comment>Provinenz</f:comment>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_PEU100_AUKEY')}" name="XX_AU_PEU100_AUKEY" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XXX_PE_listview_title_XX_AU_PEU100_AUKEY')}" name="XXX_PE_listview_title_XX_AU_PEU100_AUKEY" />
                <dla:replaceNullValue text="{XXX_PE_listview_title_XX_AU_PEU100_AUKEY.{iterator.index}}" as="PE_VALUE"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_KSU200_AUKEY')}" name="XX_AU_KSU200_AUKEY" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XXX_KS_listview_title_XX_AU_KSU200_AUKEY')}" name="XXX_KS_listview_title_XX_AU_KSU200_AUKEY" />
                <dla:replaceNullValue text="{XXX_KS_listview_title_XX_AU_KSU200_AUKEY.{iterator.index}}" as="KS_VALUE"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_vorbesitzer')}" name="detail_vorbesitzer" />
                <dla:replaceNullValue text="{detail_vorbesitzer.{iterator.index}}" as="vorbesitzer_item"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_vorbesitzer_ids')}" name="detail_vorbesitzer_ids" />
                <dla:replaceNullValue text="{detail_vorbesitzer_ids.{iterator.index}}" as="vorbesitzer_id"/>


                <f:if condition="{vorbesitzer_item}">
                    <f:then>
                        <v:variable.set value="{dla:explode(string: '{vorbesitzer_id}', delimiter: '␝')}" name="detail_id_array" />
                        <v:variable.set value="0" name="pe_rendered" />
                        <v:variable.set value="0" name="ks_rendered" />
                        <f:for each="{dla:explode(string: '{vorbesitzer_item}', delimiter: '␝')}" as="name" iteration="name_iterator">
                            <f:if condition="{v:format.substring(content: '{detail_id_array.{name_iterator.index}}', start: 0, length: 2)}==PE">
                                <f:if condition="{pe_rendered}!=1">
                                    <f:link.action action="detail" arguments="{id:'{detail_id_array.{name_iterator.index}}'}" title="" class="internal" noCacheHash="1">
                                        {name}
                                    </f:link.action>
                                    <br/>
                                    <v:variable.set value="1" name="pe_rendered" />
                                </f:if>
                            </f:if>
                            <f:if condition="{v:format.substring(content: '{detail_id_array.{name_iterator.index}}', start: 0, length: 2)}==KS">
                                <f:if condition="{ks_rendered}!=1">
                                    <f:link.action action="detail" arguments="{id:'{detail_id_array.{name_iterator.index}}'}" title="" class="internal" noCacheHash="1">
                                        {name}
                                    </f:link.action>
                                    <br/>
                                    <v:variable.set value="1" name="ks_rendered" />
                                </f:if>
                            </f:if>
                        </f:for>
                    </f:then>
                    <f:else>
                        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_BFKEY_AUKEY')}" name="XX_AU_BFKEY_AUKEY" />
                        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XXX_BF_B41600_XX_AU_BFKEY_AUKEY')}" name="XXX_BF_B41600_XX_AU_BFKEY_AUKEY" />
                        <dla:replaceNullValue text="{XXX_BF_B41600_XX_AU_BFKEY_AUKEY.{iterator.index}}" as="BF_VALUE"/>

                        <f:if condition="{BF_VALUE} && {BF_VALUE}!=''">
                            <f:link.action action="detail" arguments="{id: 'BF{XX_AU_BFKEY_AUKEY.{iterator.index}}'}">
                                {BF_VALUE} <br/>
                            </f:link.action>
                        </f:if>
                    </f:else>
                </f:if>


            </div>
            <div class="ctg-dtvt" style="width:130px;">
                <f:render partial="Display/Detail/AccessExemplar/Signature" arguments="{_all}"/>
                <f:if condition="{source}=='AK' && {AUKEY}">
                    <a href="" class="detail_link">
                        <f:translate key="Details & Benutzung" extensionName="dla_opac_ng"/>
                    </a>
                </f:if>

            </div>
        </div>
        <f:if condition="{AUKEY}">
            <f:then>
            <div id="{iterator.cycle}" class="copy-details ctg-dtvt-row">
            </f:then>
            <f:else>
                <div id="{iterator.cycle}" class="ctg-dtvt-row">
            </f:else>
        </f:if>
            <div class="">
                <div class="ctg-dtvt-row" style="margin-left:auto;margin-right:auto;">
                    <div class="ctg-dtvt-label">
                        <f:translate key="Exemplar-Aktionen" extensionName="dla_opac_ng"/>
                    </div>

                    <div class="ctg-dtvt-content">
                        <a data-auid="{AUKEY.{iterator.index}}" class="ctg-button au-permalink" title="Link kopieren"><span class="icon bel-verbinden"></span></a>
                        <div class="action-copied-info-div-{AUKEY.{iterator.index}}" style="display: none; top:auto; right:auto;">
                            <input id="action-copied-info-input-{AUKEY.{iterator.index}}" class="action-copied-info-input-{AUKEY.{iterator.index}}" type="text" readonly="" value="">
                            <button class="action-copied-info-button-{AUKEY.{iterator.index}} copy-link-button" data-auid="{AUKEY.{iterator.index}}">Link kopieren</button>
                            <button class="action-copied-info-button-{AUKEY.{iterator.index}} action-copied-success-{AUKEY.{iterator.index}}" style="display: none;">Link kopiert</button>
                        </div>
                    </div>
                </div>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                <dla:replaceNullValue text="{detail_restrictions.{iterator.index}}" as="detail_restrictions"/>

                <f:if condition="{detail_restrictions}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                <f:translate key="Benutzungshinweis" extensionName="dla_opac_ng"/>
                            </div>

                            <div class="ctg-dtvt-content">
                                <f:if condition="{detail_restrictions}">
                                    <dla:replaceBreaks text="{detail_restrictions}" as="restriction"/>
                                    <f:format.raw>{restriction}</f:format.raw>
                                </f:if>

                            </div>
                        </div>
                    </f:then>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_SIGNA_AUKEY')}" name="XX_AU_SIGNA_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_SIGNA_AUKEY.{iterator.index}}" as="XX_AU_SIGNA_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_SIGNAV_AUKEY')}" name="XX_AU_SIGNAV_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_SIGNAV_AUKEY.{iterator.index}}" as="XX_AU_SIGNAV_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_LESSIG_AUKEY')}" name="XX_AU_LESSIG_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_LESSIG_AUKEY.{iterator.index}}" as="XX_AU_LESSIG_AUKEY"/>

                <f:if condition="{XX_AU_SIGNA_AUKEY} || {XX_AU_LESSIG_AUKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Signatur" extensionName="dla_opac_ng"/>
                        </div>
                        <f:comment><XX_AU_SIGNA_AUKEY> (<XX_AU_SIGNAV_AUKEY>) Wenn <XX_AU_LESSIG_AUKEY> belegt ist, das FEld LESSIG statt SIGNA ausgeben</f:comment>
                        <div class="ctg-dtvt-content">
                            <f:if condition="{XX_AU_LESSIG_AUKEY}">
                                <f:then>
                                    {XX_AU_LESSIG_AUKEY}
                                </f:then>
                                <f:else>
                                    {XX_AU_SIGNA_AUKEY} <f:if condition="{XX_AU_SIGNAV_AUKEY}">({XX_AU_SIGNAV_AUKEY})</f:if>
                                </f:else>
                            </f:if>

                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_ZUGNR_AUKEY')}" name="XX_AU_ZUGNR_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_ZUGNR_AUKEY.{iterator.index}}" as="XX_AU_ZUGNR_AUKEY"/>

                <f:if condition="{XX_AU_ZUGNR_AUKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Zugangsnummer" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            {XX_AU_ZUGNR_AUKEY}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_SENDER_AUKEY')}" name="XX_AU_SENDER_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_SENDER_AUKEY.{iterator.index}}" as="XX_AU_SENDER_AUKEY"/>

                <f:if condition="{XX_AU_SENDER_AUKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Sender" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            {XX_AU_SENDER_AUKEY}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_SENDAT_AUKEY')}" name="XX_AU_SENDAT_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_SENDAT_AUKEY.{iterator.index}}" as="XX_AU_SENDAT_AUKEY"/>

                <f:if condition="{XX_AU_SENDAT_AUKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Sendedatum" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <dla:formatDate
                                    date="{XX_AU_SENDAT_AUKEY}"
                                    as="dateFormat"
                            />
                            {dateFormat}
                        </div>
                    </div>
                </f:if>


                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_bestandsangaben')}" name="detail_bestandsangaben" />

                <f:if condition="{detail_bestandsangaben}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Bestandsübersicht" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <f:for each="{detail_bestandsangaben}" as="item" iteration="item_iterator">
                                {item} <br/>
                            </f:for>
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_vorbesitzer')}" name="detail_vorbesitzer" />
                <dla:replaceNullValue text="{detail_vorbesitzer.{iterator.index}}" as="vorbesitzer_item"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_vorbesitzer_ids')}" name="detail_vorbesitzer_ids" />
                <dla:replaceNullValue text="{detail_vorbesitzer_ids.{iterator.index}}" as="vorbesitzer_id"/>


                <f:if condition="{vorbesitzer_item}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Vorbesitzer" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <v:variable.set value="{dla:explode(string: '{vorbesitzer_id}', delimiter: '␝')}" name="detail_id_array" />
                            <f:for each="{dla:explode(string: '{vorbesitzer_item}', delimiter: '␝')}" as="name" iteration="name_iterator">
                                <f:link.action action="detail" arguments="{id:'{detail_id_array.{name_iterator.index}}'}" title="" class="internal" noCacheHash="1">
                                    {name}
                                </f:link.action>
                                <br/>
                            </f:for>

                        </div>
                    </div>
                </f:if>


                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_inbestand')}" name="detail_inbestand" />
                <dla:replaceNullValue text="{detail_inbestand.{iterator.index}}" as="inbestand_item"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_inbestand_ids')}" name="detail_inbestand_ids" />
                <dla:replaceNullValue text="{detail_inbestand_ids.{iterator.index}}" as="inbestand_id"/>

                <f:if condition="{inbestand_item}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="In Bestand" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <v:variable.set value="{dla:explode(string: '{inbestand_id}', delimiter: '␝')}" name="detail_id_array" />
                            <f:for each="{dla:explode(string: '{inbestand_item}', delimiter: '␝')}" as="name" iteration="name_iterator">
                                <f:link.action action="detail" arguments="{id:'{detail_id_array.{name_iterator.index}}'}" title="" class="internal" noCacheHash="1">
                                    {name}
                                </f:link.action>
                                <br/>
                            </f:for>
                        </div>
                    </div>
                </f:if>


                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_merkmale')}" name="detail_merkmale" />
                <dla:replaceNullValue text="{detail_merkmale.{iterator.index}}" as="merkmale_item"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_merkmale_ids')}" name="detail_merkmale_ids" />
                <dla:replaceNullValue text="{detail_merkmale_ids.{iterator.index}}" as="merkmale_id"/>

                <f:if condition="{merkmale_item}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Merkmale" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <v:variable.set value="{dla:explode(string: '{merkmale_id}', delimiter: '␝')}" name="detail_id_array" />
                            <f:for each="{dla:explode(string: '{merkmale_item}', delimiter: '␝')}" as="name" iteration="name_iterator">
                                <f:link.action action="detail" arguments="{id:'{detail_id_array.{name_iterator.index}}'}" title="" class="internal" noCacheHash="1">
                                    {name}
                                </f:link.action>
                                <br/>
                            </f:for>
                        </div>
                    </div>
                </f:if>




                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_FBTIT_AUKEY')}" name="XX_AU_FBTIT_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_FBTIT_AUKEY.{iterator.index}}" as="XX_AU_FBTIT_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_BEMEXT_AUKEY')}" name="XX_AU_BEMEXT_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_BEMEXT_AUKEY.{iterator.index}}" as="XX_AU_BEMEXT_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_VIRAUF_AUKEY')}" name="XX_AU_VIRAUF_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_VIRAUF_AUKEY.{iterator.index}}" as="XX_AU_VIRAUF_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_AI710_AUKEY')}" name="XX_AU_AI710_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_AI710_AUKEY.{iterator.index}}" as="XX_AU_AI710_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_A0710_AUKEY')}" name="XX_AU_A0710_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_A0710_AUKEY.{iterator.index}}" as="XX_AU_A0710_AUKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_vermerke')}" name="detail_vermerke" />
                <dla:replaceNullValue text="{detail_vermerke.{iterator.index}}" as="vermerk_item"/>


                <f:if condition="{XX_AU_FBTIT_AUKEY} || {XX_AU_BEMEXT_AUKEY} || {XX_AU_VIRAUF_AUKEY} || {XX_AU_AI710_AUKEY} || {XX_AU_A0710_AUKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Beschreibung" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <f:if condition="{XX_AU_FBTIT_AUKEY}">
                                {XX_AU_FBTIT_AUKEY} <br/>
                            </f:if>

                            <f:if condition="{XX_AU_BEMEXT_AUKEY}">
                                {XX_AU_BEMEXT_AUKEY} <br/>
                            </f:if>

                            <f:if condition="{XX_AU_VIRAUF_AUKEY}">
                                {XX_AU_VIRAUF_AUKEY} <br/>
                            </f:if>

                            <f:if condition="{vermerk_item}">
                                <f:for each="{dla:explode(string: '{vermerk_item}', delimiter: '␝')}" as="name" iteration="name_iterator">
                                    {name}<br/>
                                </f:for>
                            </f:if>
                        </div>
                    </div>
                </f:if>


                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'id')}" name="id" />
                <s:data.newArray
                        name="query"
                        global="1"
                        keys="{0:'AUKEY'}"
                        values="{0:'{AUKEY.{iterator.index}}'}"
                />
                <dla:fromSolr
                    query="{query}"
                    fields="id,listview_title"
                />
                <f:for each="{solr}" as="item" iteration="solr_iterator">
                    <f:if condition="{item.id}!={id}">

                        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'enthaltene_materialien')}" name="enthaltene_materialien" />

                        <f:for each="{enthaltene_materialien}" as="material" iteration="material_iterator">
                            <f:if condition="{material}=={item.id}">
                                <div class="ctg-dtvt-row">
                                    <div class="ctg-dtvt-label">
                                        <f:translate key="Enthaltene Materialien" extensionName="dla_opac_ng"/>
                                    </div>

                                    <div class="ctg-dtvt-content">
                                        <f:link.action action="detail" arguments="{id:material}" class="internal">
                                            {item.listview_title}
                                        </f:link.action>

                                    </div>
                                </div>
                            </f:if>
                        </f:for>

                    </f:if>
                </f:for>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_BUCHUM_AUKEY')}" name="XX_AU_BUCHUM_AUKEY" />
                <dla:replaceNullValue text="{XX_AU_BUCHUM_AUKEY.{iterator.index}}" as="XX_AU_BUCHUM_AUKEY"/>

                <f:if condition="{XX_AU_BUCHUM_AUKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Buchumschlag" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            "<f:translate key="Vorhanden. Bitte per Leihschein bestellen." extensionName="dla_opac_ng"/>"
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AURL')}" name="AURL" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'BEMURL')}" name="BEMURL" />

                <f:if condition="{BEMURL}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Digitales Objekt" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:for each="{BEMURL}" as="item" iteration="iterator">
                                <f:if condition="{AURL.{iterator.index}} != '#NV' && {item} != '#NV'">
                                    <a href="{AURL.{iterator.index}}">{item}</a><br />
                                </f:if>
                            </f:for>

                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />
                <dla:replaceNullValue array="{XX_MM_MOTITL_INDKEY}" as="XX_MM_MOTITL_INDKEY"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOPFAD_INDKEY')}" name="XX_MM_MOPFAD_INDKEY" />
                <dla:replaceNullValue array="{XX_MM_MOPFAD_INDKEY}" as="XX_MM_MOPFAD_INDKEY"/>

                <f:if condition="{XX_MM_MOTITL_INDKEY}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Digitales Objekt" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <f:if condition="{XX_MM_MOPFAD_INDKEY}">
                                <f:then>
                                    <f:for each="{XX_MM_MOTITL_INDKEY}" as="item" iteration="item_iterator">
                                        <a href="{XX_MM_MOPFAD_INDKEY.{item_iterator.index}}">
                                            {item}
                                        </a><br/>
                                    </f:for>
                                </f:then>
                                <f:else>
                                    <f:for each="{XX_MM_MOTITL_INDKEY}" as="item" iteration="item_iterator">
                                        {item}<br/>
                                    </f:for>
                                </f:else>
                            </f:if>
                        </div>
                    </div>
                </f:if>


                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_BFKEY_AUKEY')}" name="XX_AU_BFKEY_AUKEY" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'id')}" name="id" />

                <dla:replaceNullValue text="{XX_AU_BFKEY_AUKEY.{item_iterator.index}}" as="BFKEY_AUKEY"/>

                <dla:collection record="{id}" as="data"/>
                <dla:collection record="BF{BFKEY_AUKEY}" as="dataGreater"/>
                <f:if condition="{data} || {dataGreater}">
                    <f:then>
                        <f:if condition="{dataGreater} && !{data}">
                            <f:then>
                                <v:variable.set value="{dataGreater}" name="data" />
                            </f:then>
                        </f:if>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                <f:translate key="In Bestandsübersicht zeigen" extensionName="dla_opac_ng"/>
                            </div>

                            <div class="ctg-dtvt-content">
                                <div>
                                    <f:for each="{data}" as="arrayData" iteration="ArrayIterator">
                                        <f:for each="{arrayData}" as="doc" iteration="iterator">
                                            <f:if condition="{doc.record_id}">
                                                <f:then>
                                                    <f:link.action pageUid="{settings.collectionUid}" additionalParams="{'tx_dlaopacng_dlacollection[record]':'{doc.record_id}','tx_dlaopacng_dlacollection[uid]':'{doc.uid}'}">
                                                        {doc.treeview_title}
                                                    </f:link.action>
                                                </f:then>
                                                <f:else>
                                                    {doc.treeview_title}
                                                </f:else>
                                            </f:if>
                                            <f:if condition="!{iterator.isLast}">
                                                ->
                                            </f:if>
                                        </f:for>
                                        <br/><br/>
                                    </f:for>
                                </div>
                            </div>

                        </div>
                    </f:then>
                </f:if>

            </div>

        </div>



    </f:case>
    <f:case value="BI">

        <div class="ctg-dtvt-row row-{AUKEY.{iterator.index}} aukey-row-info">

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'KLASS')}" name="KLASS" />

            <f:if condition="{KLASS}=='nicht benutzbar' || {listview_type}=='Daten'">
                <f:then>
                    <div style="padding: 0.5rem 0;">
                        <span class="ctg-button" style="background-color: #dadada;color: #747474;padding-bottom: 10px;padding-left: 6px;padding-right: 6px;padding-top:10px;">
                            <f:translate key="Nicht bestellbar" extensionName="dla_opac_ng"/>
                        </span>
                        <span class="icon bel-kreis02" style="color:#cf2a0e;margin-left: 3px;"></span>
                    </div>
                </f:then>
                <f:else>
                    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                    <f:if condition="{detail_restrictions}">
                        <f:then>
                            <dla:replaceBreaks text="{detail_restrictions}" as="restriction"/>

                            <f:if condition="{v:format.substring(content: '{restriction}', start: 0, length: 17)}=='bedingt benutzbar'">
                                <f:then>
                                    <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                        <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                        <span class="icon bel-kreis02" style="color:#df661e;"></span>
                                    </div>
                                </f:then>
                                <f:else>
                                    <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                        <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                        <span class="icon bel-kreis02" style="color:#00df27;"></span>
                                    </div>
                                </f:else>
                            </f:if>
                        </f:then>
                        <f:else>
                            <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                <span class="icon bel-kreis02" style="color:#00df27;"></span>
                            </div>
                        </f:else>
                    </f:if>
                </f:else>
            </f:if>
            <div class="ctg-dtvt-content">
            </div>
            <div class="ctg-dtvt">
            </div>
        </div>
        <div id="{iterator.cycle}" class="ctg-dtvt-row">

            <div class="">

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />

                <f:if condition="{detail_restrictions}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                <f:translate key="Benutzungshinweis" extensionName="dla_opac_ng"/>
                            </div>

                            <div class="ctg-dtvt-content">
                                <dla:replaceBreaks text="{detail_restrictions}" as="detail_restrictions" />
                                <f:format.raw>{detail_restrictions}</f:format.raw>
                            </div>
                        </div>
                    </f:then>
                </f:if>
<f:comment>
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B04000')}" name="B04000" />

                <f:if condition="{B04000}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                <f:translate key="Inventarnummer" extensionName="dla_opac_ng"/>
                            </div>

                            <div class="ctg-dtvt-content">
                                {B04000}
                            </div>
                        </div>
                    </f:then>
                </f:if>
</f:comment>
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'INDKEY')}" name="INDKEY" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />

                <dla:replaceNullValue array="{INDKEY}" as="array"/>
                <f:if condition="{array}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Digitales Objekt" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <f:for each="{INDKEY}" as="item" iteration="iterator_indkey">
                                <s:data.newArray
                                        name="query"
                                        global="1"
                                        keys="{0:'id'}"
                                        values="{0:'MM{item}'}"
                                />
                                <f:link.action action="index" arguments="{query}" class="internal" noCacheHash="1">
                                    {XX_MM_MOTITL_INDKEY.{iterator_indkey.index}}<br/>
                                </f:link.action>
                            </f:for>
                        </div>
                    </div>
                </f:if>

            </div>
        </div>

    </f:case>
    <f:case value="BF">

        <div class="ctg-dtvt-row row-{AUKEY.{iterator.index}} aukey-row-info">

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'DLAABT')}" name="DLAABT" />
            <dla:replaceNullValue text="{DLAABT}" as="DLAABT"/>

            <f:if condition="{DLAABT}=='Handschriftensammlung' || {DLAABT}=='Bibliothek' || {DLAABT}=='Cotta-Archiv' || {DLAABT}=='Suhrkamp-Archiv' ||{listview_type}=='Daten'">
                <f:then>
                    <div style="padding: 0.5rem 0;">
                        <span class="ctg-button" style="background-color: #dadada;color: #747474;padding-bottom: 10px;padding-left: 6px;padding-right: 6px;padding-top:10px;">
                            <f:translate key="Nicht bestellbar" extensionName="dla_opac_ng"/>
                        </span>
                        <span class="icon bel-kreis02" style="color:#cf2a0e;margin-left: 3px;"></span>
                    </div>
                </f:then>
                <f:else>
                    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                    <f:if condition="{detail_restrictions}">
                        <dla:replaceBreaks text="{detail_restrictions}" as="restriction"/>

                        <f:if condition="{v:format.substring(content: '{restriction}', start: 0, length: 17)}=='bedingt benutzbar'">
                            <f:then>
                                <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                    <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                    <span class="icon bel-kreis02" style="color:#df661e;"></span>
                                </div>
                            </f:then>
                            <f:else>
                                <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                    <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                    <span class="icon bel-kreis02" style="color:#00df27;"></span>
                                </div>
                            </f:else>
                        </f:if>
                    </f:if>
                </f:else>
            </f:if>

            <div class="ctg-dtvt-content">

            </div>
            <div class="ctg-dtvt">

            </div>
        </div>
        <div id="{iterator.cycle}" class="ctg-dtvt-row">
            <div class="">

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                <dla:replaceNullValue text="{detail_restrictions}" as="detail_restrictions"/>

                <f:if condition="{detail_restrictions}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                <f:translate key="Benutzungshinweis" extensionName="dla_opac_ng"/>
                            </div>

                            <div class="ctg-dtvt-content">
                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AUSTAT')}" name="AUSTAT" />
                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'KLASS')}" name="KLASS" />
                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B04030')}" name="B04030" />
                                <f:if condition="{AUSTAT} || {KLASS} || {B04030}">

                                    <dla:data.joinFields
                                            fieldNames="{0:'AUSTAT',1:'KLASS',2:'B04030'}"
                                            fieldWraps="{0:'%s',1:'. %s',2:'. %s'}"
                                            fields="{document.fields}"
                                            as="linkTexts"
                                    />

                                    <f:render
                                        partial="Display/Field/List"
                                        arguments="{
                                            document:document,
                                            results:results,
                                            field:'AUSTAT',
                                            linkFieldContent:linkFieldContent,
                                            linkFacets:linkFacets,
                                            linkTexts:linkTexts
                                    }"/>
                                    <br/>
                                </f:if>

                                <dla:replaceBreaks text="{detail_restrictions}" as="detail_restrictions" />
                                <f:format.raw>{detail_restrictions}</f:format.raw>
                            </div>
                        </div>
                    </f:then>
                </f:if>



                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'BUCHN')}" name="BUCHN" />
                <dla:replaceNullValue text="{BUCHN}" as="BUCHN"/>

                <f:if condition="{BUCHN}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Mediennummer" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            {BUCHN}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'BEMEXT')}" name="BEMEXT" />
                <f:if condition="{BEMEXT}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Bemerkungen" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            <dla:replaceBreaks text="{BEMEXT}" as="BEMEXT" />
                            <f:format.raw>{BEMEXT}</f:format.raw>
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B01610')}" name="B01610" />
                <dla:replaceNullValue array="{B01610}" as="B01610"/>

                <f:if condition="{B01610}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Ordnung" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:for each="{B01610}" as="item" iteration="item_iterator">
                                {item}

                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B01611')}" name="B01611" />
                                <dla:replaceNullValue text="{B01611.{item_iterator.index}}" as="B01611"/>

                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B01612')}" name="B01612" />
                                <dla:replaceNullValue text="{B01612.{item_iterator.index}}" as="B01612"/>

                                <f:if condition="{B01611}">
                                    <f:then>
                                        <f:if condition="{B01612}">
                                            <f:then>
                                                ({B01611} {B01612})
                                            </f:then>
                                            <f:else>
                                                ({B01611})
                                            </f:else>
                                        </f:if>
                                    </f:then>
                                    <f:else>
                                        <f:if condition="{B01612}">
                                            ({B01612})
                                        </f:if>
                                    </f:else>
                                </f:if>



                                <br/>
                            </f:for>
                        </div>
                    </div>
                </f:if>


                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02610')}" name="B02610" />
                <dla:replaceNullValue array="{B02610}" as="B02610"/>

                <f:if condition="{B02610}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Verzeichnung" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:for each="{B02610}" as="item" iteration="item_iterator">
                                {item}

                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02611')}" name="B02611" />
                                <dla:replaceNullValue text="{B02611.{item_iterator.index}}" as="B02611"/>

                                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'B02612')}" name="B02612" />
                                <dla:replaceNullValue text="{B02612.{item_iterator.index}}" as="B02612"/>

                                <f:if condition="{B02611}">
                                    <f:then>
                                        <f:if condition="{B02612}">
                                            <f:then>
                                                ({B02611} {B02612})
                                            </f:then>
                                            <f:else>
                                                ({B02611})
                                            </f:else>
                                        </f:if>
                                    </f:then>
                                    <f:else>
                                        <f:if condition="{B02612}">
                                            ({B02612})
                                        </f:if>
                                    </f:else>
                                </f:if>



                                <br/>
                            </f:for>
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'INDKEY')}" name="INDKEY" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />

                <dla:replaceNullValue array="{INDKEY}" as="array"/>
                <f:if condition="{array}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Digitales Objekt" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <f:for each="{INDKEY}" as="item" iteration="iterator">
                                <s:data.newArray
                                        name="query"
                                        global="1"
                                        keys="{0:'id'}"
                                        values="{0:'MM{item}'}"
                                />
                                <f:link.action action="index" arguments="{query}" class="internal" noCacheHash="1">
                                    {XX_MM_MOTITL_INDKEY.{iterator.index}}<br/>
                                </f:link.action>
                            </f:for>
                        </div>
                    </div>
                </f:if>

            </div>
        </div>

    </f:case>
    <f:case value="HS">

        <div class="ctg-dtvt-row row-{AUKEY.{iterator.index}} aukey-row-info">

            <f:if condition="{listview_type}=='Daten'">
                <f:then>
                    <div style="padding: 0.5rem 0;">
                        <span class="ctg-button" style="background-color: #dadada;color: #747474;padding-bottom: 10px;padding-left: 6px;padding-right: 6px;padding-top:10px;">
                            <f:translate key="Nicht bestellbar" extensionName="dla_opac_ng"/>
                        </span>
                        <span class="icon bel-kreis02" style="color:#cf2a0e;margin-left: 3px;"></span>
                    </div>
                </f:then>
                <f:else>
                    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                    <f:if condition="{detail_restrictions}">
                        <f:then>
                            <dla:replaceBreaks text="{detail_restrictions}" as="restriction"/>

                            <f:if condition="restriction!=''">
                                <f:then>
                                    <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                        <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                        <span class="icon bel-kreis02" style="color:#df661e;"></span>
                                    </div>
                                </f:then>
                                <f:else>
                                    <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                        <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                        <span class="icon bel-kreis02" style="color:#00df27;"></span>
                                    </div>
                                </f:else>
                            </f:if>
                        </f:then>
                        <f:else>
                            <div style="padding: 0.5rem 0; margin-bottom: 10px;">

                                <f:render partial="Display/Detail/AccessExemplar/OrderLink" arguments="{_all}"/>

                                <span class="icon bel-kreis02" style="color:#00df27;"></span>
                            </div>
                        </f:else>
                    </f:if>
                </f:else>
            </f:if>

            <div class="ctg-dtvt-content">
                {solr.listview_title}
            </div>
            <div class="ctg-dtvt">


            </div>
        </div>
        <div id="{iterator.cycle}" class="ctg-dtvt-row">
            <div class="">

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_restrictions')}" name="detail_restrictions" />
                <dla:replaceNullValue text="{detail_restrictions}" as="detail_restrictions"/>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'H04030')}" name="H04030" />


                <f:if condition="{detail_restrictions}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                <f:translate key="Benutzungshinweis" extensionName="dla_opac_ng"/>
                            </div>

                            <div class="ctg-dtvt-content">
                                <dla:replaceBreaks text="{detail_restrictions}" as="detail_restrictions" />
                                <f:format.raw>{detail_restrictions}</f:format.raw>
                                <f:if condition="{H04030}">
                                    <br/>{H04030}
                                </f:if>

                            </div>
                        </div>
                    </f:then>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'H04010')}" name="H04010" />
                <dla:replaceNullValue text="{H04010}" as="H04010"/>

                <f:if condition="{H04010}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Übernommene Sigel" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            {H04010}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'H00070')}" name="H00070" />
                <dla:replaceNullValue text="{H00070}" as="H00070"/>

                <f:if condition="{H00070}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Mikrofiche" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            {H00070}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'H00080')}" name="H00080" />
                <dla:replaceNullValue text="{H00080}" as="H00080"/>

                <f:if condition="{H00080}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Repro" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            {H00080}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'KASTNR')}" name="KASTNR" />
                <dla:replaceNullValue text="{KASTNR}" as="KASTNR"/>

                <f:if condition="{KASTNR}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Kasten" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            {KASTNR}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'MAPPNR')}" name="MAPPNR" />
                <dla:replaceNullValue text="{MAPPNR}" as="MAPPNR"/>

                <f:if condition="{MAPPNR}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Mappe" extensionName="dla_opac_ng"/>
                        </div>
                        <div class="ctg-dtvt-content">
                            {MAPPNR}
                        </div>
                    </div>
                </f:if>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'INDKEY')}" name="INDKEY" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />

                <dla:replaceNullValue array="{INDKEY}" as="array"/>
                <f:if condition="{array}">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            <f:translate key="Digitales Objekt" extensionName="dla_opac_ng"/>
                        </div>

                        <div class="ctg-dtvt-content">
                            <f:for each="{INDKEY}" as="item" iteration="iterator_indkey">
                                <s:data.newArray
                                        name="query"
                                        global="1"
                                        keys="{0:'id'}"
                                        values="{0:'MM{item}'}"
                                />
                                <f:link.action action="index" arguments="{query}" class="internal" noCacheHash="1">
                                    {XX_MM_MOTITL_INDKEY.{iterator_indkey.index}}<br/>
                                </f:link.action>
                            </f:for>
                        </div>
                    </div>
                </f:if>

            </div>
        </div>

    </f:case>
    <f:defaultCase>

    </f:defaultCase>
</f:switch>