{namespace v=FluidTYPO3\vhs\ViewHelpers}
{namespace slub=Slub\SlubFindExtend\ViewHelpers}
{namespace dla=Dla\DlaOpacNg\ViewHelpers}
{namespace s=Subugoe\Find\ViewHelpers}

<f:debug>{document.fields}</f:debug>
<div class="ctg-detailview-head">
    <div class="ctg-dvh-main">
        <div class="ctg-ri-icon">
            <f:render partial="Display/Detail/MediatypeIcon" arguments="{listview_type:document.listview_type, listview_type_cardinality:document.listview_type_cardinality}" />
        </div>
        <div class="ctg-ri-text">
            <h2>
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0331')}" name="A0331" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0335')}" name="A0335" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TITREG')}" name="TITREG" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'DOKTYP')}" name="DOKTYP" />
                <dla:data.valueForKeyFiltered key="ATIT" filterKey="AMTIT" filterValues="{0:'340n'}" fields="{document.fields}" as="ATIT_340n" />
                <dla:data.valueForKeyFiltered key="ATIT" filterKey="AMTIT" filterValues="{0:'341n'}" fields="{document.fields}" as="ATIT_341n" />
                <dla:data.joinFieldArrays
                        arrays="{0:'{ATIT_340n}',1:'{ATIT_341n}'}"
                        fieldWraps="{0:'%s',1:': %s'}"
                        as="parallelTitle"
                />
                <dla:data.implode
                        array="{parallelTitle}"
                        glue=" = "
                        as="parallelTitle"
                />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0359')}" name="A0359" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0369')}" name="A0369" />

                <dla:data.valueForKeyFiltered key="ATIT" filterKey="AMTIT" filterValues="{0:'361n'}" fields="{document.fields}" as="ATIT_361n" />
                <dla:data.valueForKeyFiltered key="ATIT" filterKey="AMTIT" filterValues="{0:'365n'}" fields="{document.fields}" as="ATIT_365n" />
                <dla:data.implode
                        array="{ATIT_361n}"
                        glue=". "
                        as="ATIT_361n"
                />
                <dla:data.implode
                        array="{ATIT_365n}"
                        glue=". "
                        as="ATIT_365n"
                />

                <f:if condition="{DOKTYP.0} == 'Zeitschriftenheft' || DOKTYP.0} == 'Zeitschriftenband') ">
                    <f:then>
                        <dla:data.joinFields
                                fieldNames="{0:'TITREG',1:'A0335'}"
                                fieldWraps="{0:'%s',1:':%s'}"
                                fields="{document.fields}"
                                as="title"
                        />
                    </f:then>
                    <f:else>
                        <f:if condition="{A0331}">
                            <f:then>
                                <dla:data.joinFields
                                        fieldNames="{0:'A0331',1:'A0335'}"
                                        fieldWraps="{0:'%s',1:': %s'}"
                                        fields="{document.fields}"
                                        as="title"
                                />
                            </f:then>
                            <f:else>
                                <dla:data.joinFields
                                        fieldNames="{0:'TITREG',1:'A0335'}"
                                        fieldWraps="{0:'%s',1:':%s'}"
                                        fields="{document.fields}"
                                        as="title"
                                />
                            </f:else>
                        </f:if>
                    </f:else>
                </f:if>

                <f:if condition="{title} || {parallelTitle} || {A0359} || {A0369} || {ATIT_361n} || {ATIT_365n}">
                    <f:then>
                        {title.0}
                        <f:if condition="{parallelTitle}">
                            = {parallelTitle}
                        </f:if>
                        <f:if condition="{A0359}">
                            <f:then>
                                / {A0359}
                            </f:then>
                            <f:else>
                                <f:if condition="{A0369}">
                                    / {A0369}
                                </f:if>
                            </f:else>
                        </f:if>
                        <f:if condition="{ATIT_361n}">
                            . {ATIT_361n}
                        </f:if>
                        <f:if condition="{ATIT_365n}">
                            . {ATIT_365n}
                        </f:if>
                    </f:then>
                    <f:else>
                        -
                    </f:else>
                </f:if>
            </h2>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">
                    <f:render
                        partial="Display/Field/Inline"
                        arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_associate,
                            separator:'; '
                    }"/>
                </f:if>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">,</f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional1)}">
                    <f:render
                        partial="Display/Field/Inline"
                        arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional1,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional2)}">
                    <f:render
                        partial="Display/Field/Inline"
                        arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional2,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
        </div>
        <div class="ctg-ri-image">

        </div>
    </div>

    <ul class="ctg-dvh-aside">
        <li><a class="ctg-button" title="merken"><span class="icon bel-stern01"></span></a></li>
        <li><a class="ctg-button" title="versenden"><span class="icon bel-brief01"></span></a></li>
        <li><a class="ctg-button" title="teilen"><span class="icon bel-link01"></span></a></li>
        <li><a class="ctg-button" title="exportieren"><span class="icon bel-postin"></span></a></li>
    </ul>
</div>

<f:comment>
<div class="ctg-detailview-media">
    <img src="Start%20-%20DLA%20Marbach-Dateien/platzhalter-bild.jpg" alt="">
</div>
</f:comment>

<div class="ctg-detailview-tabs">
    <ul class="ctg-dtvt-menu">
        <li><a href="" class="ctg-dtvt-menu-active"><span>Details</span></a></li><li><a href=""><span>Zugang (?)</span></a></li><li><a href=""><span>Platzhalter 1</span></a></li><li><a href=""><span>Platzhalter 2</span></a></li>
    </ul>

    <div class="ctg-dtvt-details">
        <div class="ctg-dtvt-row">
            <div class="ctg-dtvt-label">
                Medientyp
            </div>
            <div class="ctg-dtvt-content">
                <f:render
                    partial="Display/Field/List"
                    arguments="{
                        document:document,
                        results:results,
                        field:'listview_type',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        }"/>
            </div>

        </div>

<div class="ctg-dtvt-row">
    <f:comment>Urheber</f:comment>

    <dla:data.valueForKeyFiltered key="XX_PE_P0800_PE0100" filterKey="GFUPER" filterValues="{0:'_GS'}" mustMatch="false" fields="{document.fields}" as="XX_PE_P0800_PE0100" />
    <dla:data.valueForKeyFiltered key="GFUPE" filterKey="GFUPER" filterValues="{0:'_GS'}" mustMatch="false" fields="{document.fields}" as="GFUPE_GS" />
    <dla:data.joinFieldArrays
            arrays="{0:'{XX_PE_P0800_PE0100}',1:'{GFUPE_GS}'}"
            fieldWraps="{0:'%s',1:'[%s]'}"
            as="author"
    />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'PE0100')}" name="PE0100" />

    <div class="ctg-dtvt-label">
        Urheber
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{author}">
            <f:then>
                <f:for each="{author}" as="item" iteration="iterator">
                    <f:render
                        partial="Display/Field/List"
                        arguments="{
                            document:document,
                            results:results,
                            field:'PE0100',
                            linkFieldContent:1,
                            linkFacets:linkFacets,
                            linkTexts:item
                        }"/>
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <f:comment>Beteiligt</f:comment>

    <dla:data.valueForKeyFiltered
            key="XX_PE_P0800_PE0100"
            filterKey="GFUPER"
            filterValues="{0:'_GS'}"
            mustMatch="false"
            negateFilter="true"
            fields="{document.fields}"
            as="XX_PE_P0800_PE0100" />

    <dla:data.valueForKeyFiltered
            key="GFUPE"
            filterKey="GFUPER"
            filterValues="{0:'_GS'}"
            mustMatch="false"
            negateFilter="true"
            fields="{document.fields}" as="GFUPE_NOT_GS" />
    <dla:data.joinFieldArrays
            arrays="{0:'{XX_PE_P0800_PE0100}',1:'{GFUPE_NOT_GS}'}"
            fieldWraps="{0:'%s',1:'[%s]'}"
            as="involved"
    />

    <div class="ctg-dtvt-label">
        Beteiligt
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{involved}">
            <f:then>
                <f:render
                    partial="Display/Field/List"
                    arguments="{
                        document:document,
                        results:results,
                        field:'PE0100',
                        linkFieldContent:1,
                        linkFacets:linkFacets,
                        linkTexts:item
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>

</div>

<div class="ctg-dtvt-row">

    <f:comment>Erschienen</f:comment>

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'POS113')}" name="POS113" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0410')}" name="A0410" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0412')}" name="A0412" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0425')}" name="A0425" />
    <dla:data.joinFieldArrays
            arrays="{0:'{A0410}',1:'{A0412}',2:'{A0425}'}"
            fieldWraps="{0:'%s',1:': %s',2:', %s'}"
            as="appeared"
    />

    <div class="ctg-dtvt-label">
        Erschienen
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{appeared}">
            <f:then>
                <f:if condition="{POS113} == 'Fortlaufende Ressource / Jahrbuch' ||
                {POS113} == 'Fortlaufende Ressource / Zeitschrift' ||
                {POS113} == 'Fortlaufende Ressource / Serie, Reihe' ||
                {POS113} == 'Fortlaufende Ressource / Zeitung'}">
                    <f:then>
                        <f:for each="{appeared}" as="item" iteration="iterator">
                            <f:if condition="{iterator.index} == 0">
                                {item}<br />
                            </f:if>
                            <f:if condition="{iterator.index} > 0">
                                <span style="color:red;">{item}</span><br />
                            </f:if>
                        </f:for>
                    </f:then>
                    <f:else>
                        <f:for each="{appeared}" as="item" iteration="iterator">
                            {item}<br />
                        </f:for>
                    </f:else>
                </f:if>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <f:comment>Erscheinungsverlauf</f:comment>

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0405')}" name="A0405" />
    <div class="ctg-dtvt-label">
        Erscheinungsverlauf
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0405}">
            <f:then>
                <f:render
                    partial="Display/Field/List"
                    arguments="{
                        document:document,
                        results:results,
                        field:'A0405',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <f:comment>Ausgabe</f:comment>

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0403')}" name="A0403" />

    <div class="ctg-dtvt-label">
        Ausgabe
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0403}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'A0403',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>

</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0433')}" name="A0433" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0434')}" name="A0434" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0437')}" name="A0437" />

    <dla:data.joinFields
            fieldNames="{0:'A0433',1:'A0434',3:'A0437'}"
            fieldWraps="{0:'%s',1:': %s',2:'+ %s'}"
            fields="{document.fields}"
            as="linkTexts"
    />

    <div class="ctg-dtvt-label">
        Umfang
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{linkTexts}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'A0433',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets,
                        linkTexts:linkTexts
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>

</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0653')}" name="A0653" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AI653')}" name="AI653" />

    <dla:data.joinFields
            fieldNames="{0:'A0653',1:'AI653'}"
            fieldWraps="{0:'%s',1:': (%s)'}"
            fields="{document.fields}"
            as="linkTexts"
    />

    <div class="ctg-dtvt-label">
        Physische Beschreibung
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0653} || {AI653}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'A0653',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets,
                        linkTexts:linkTexts
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>

</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0540')}" name="A0540" />

    <div class="ctg-dtvt-label">
        ISBN
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0540}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                    document:document,
                    results:results,
                    field:'A0540',
                    linkFieldContent:linkFieldContent,
                    linkFacets:linkFacets
                  }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0542')}" name="A0542" />
    <div class="ctg-dtvt-label">
        ISSN
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0542}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'A0542',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        E-ISSN
    </div>
    <div class="ctg-dtvt-content">
        Baustelle
    </div>
</div>

<div class="ctg-dtvt-row">
    <dla:data.valueForKeyFiltered
            key="ANUM"
            filterKey="AMNUM"
            filterValues="{0:'572z'}"
            fields="{document.fields}"
            as="ANUM" />

    <div class="ctg-dtvt-label">
        ZDB-ID
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{ANUM}">
            <f:then>
                <f:for each="{ANUM}" as="item" iteration="iterator">
                    <a href="http://ld.zdb-services.de/resource/{item}">{item}</a><br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{0:'Einzelbestandteil / unselbständiges Werk'}" name="AKA451_Filter" />

    <dla:data.valueForKeyFiltered key="GESTYP" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="GESTYP" />
    <dla:data.valueForKeyFiltered key="HBKEY" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="HBKEY" />

    <dla:data.valueForKeyFiltered key="XX_AK_TITREG_AKA451" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="XX_AK_TITREG_AKA451" />
    <dla:data.valueForKeyFiltered key="XX_AK_A0359_AKA451" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="XX_AK_A0359_AKA451" />
    <dla:data.valueForKeyFiltered key="listview_additional1" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="listview_additional1" />
    <dla:data.valueForKeyFiltered key="XX_AK_A0331_AKA451" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="XX_AK_A0331_AKA451" />
    <dla:data.valueForKeyFiltered key="XX_AK_TITREG_HBKEY" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="XX_AK_TITREG_HBKEY" />

    <dla:data.valueForKeyFiltered key="AKA451" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="AKA451" />
    <dla:data.valueForKeyFiltered key="A0455" filterKey="GESTYP" negateFilter="true" filterValues="{AKA451_Filter}" fields="{document.fields}" as="A0455" />
    <dla:data.valueForKeyFiltered key="A0451" filterKey="GESTYP" negateFilter="true" filterValues="{AKA451_Filter}" fields="{document.fields}" as="A0451" />

    <f:if condition="{GESTYP.0} == 'Teil mit abhängigem Titel'">
        <f:then>
            <dla:data.joinFieldArrays
                    arrays="{0:'{XX_AK_TITREG_AKA451}',1:'{XX_AK_A0359_AKA451}',2:'{listview_additional1}' ,3:'{A0455}'}"
                    fieldWraps="{0:'%s',1:'\ %s',2:'. - %s' ,3:'; %s'}"
                    as="linkTexts"/>
        </f:then>
        <f:else if="{GESTYP.0} == 'Band/Teil mit unabhängigem Titel: gezählt' ||
                {GESTYP.0} == 'Band/Teil mit unabhängigem Titel: ungezählt'">
            <f:if condition="{A0451.0}">
                <f:then>
                    <dla:data.joinFieldArrays
                            arrays="{0:'{A0451}'}"
                            fieldWraps="{0:'%s'}"
                            as="linkTexts"/>
                </f:then>
                <f:else>
                    <dla:data.joinFieldArrays
                            arrays="{0:'{XX_AK_TITREG_AKA451}', 1:'{A0455}'}"
                            fieldWraps="{0:'%s', 1:'; %s'}"
                            as="linkTexts"/>
                </f:else>
            </f:if>

        </f:else>
        <f:else>
            <f:if condition="!{HBKEY}">
                <f:then>
                    <dla:data.joinFieldArrays
                            arrays="{0:'{XX_AK_TITREG_AKA451}',1:'{A0455}'}"
                            fieldWraps="{0:'%s',1:': %s'}"
                            as="linkTexts"
                    />
                </f:then>
                <f:else>
                    <dla:data.joinFieldArrays
                            arrays="{0:'{XX_AK_TITREG_HBKEY}'}"
                            fieldWraps="{0:'%s'}"
                            as="linkTexts"
                    />
                </f:else>
            </f:if>

        </f:else>
    </f:if>

    <div class="ctg-dtvt-label">
        Teil von
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{linkTexts}">
            <f:then>
                <f:for each="{linkTexts}" as="item" iteration="iterator">
                    <f:if condition="{AKA451.{iterator.index}} != '#NV'">
                        <f:then>
                            <slub:data.fromSolr
                                    query="A0001:(\"{AKA451.{iterator.index}}\")"
                            fields="id"
                            rows="10">
                            <f:then>
                                <f:link.action action="detail" arguments="{id:solr.id}" class="internal">
                                    {item}
                                </f:link.action>
                            </f:then>
                            <f:else>
                                {item}
                            </f:else>
                            </slub:data.fromSolr>
                        </f:then>
                        <f:else>
                            {item}
                        </f:else>
                    </f:if>
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>

    </div>
</div>

<div class="ctg-dtvt-row">
    <f:comment>Enthalten in</f:comment>

    <v:variable.set value="{0:'Einzelbestandteil / unselbständiges Werk'}" name="AKA451_Filter" />

    <f:comment>
        <v:variable.set value="{0:'Teil einer fortlaufenden Zusammenstellung, Aufsatz (z.B. Zeitschrift)'}" name="AKA451_Filter" />
    </f:comment>

    <dla:data.valueForKeyFiltered key="GESTYP" filterKey="GESTYP" negateFilter="true" filterValues="{AKA451_Filter}" fields="{document.fields}" as="GESTYP" />

    <dla:data.valueForKeyFiltered key="XX_AK_TITREG_AKA451" filterKey="GESTYP" negateFilter="false"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="XX_AK_TITREG_AKA451" />
    <dla:data.valueForKeyFiltered key="AKA451" filterKey="GESTYP" negateFilter="false"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="AKA451" />
    <dla:data.valueForKeyFiltered key="USEIT" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="USEIT" />
    <dla:data.valueForKeyFiltered key="listview_additional1" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="listview_additional1" />
    <dla:data.valueForKeyFiltered key="XX_AK_A0359_AKA451" filterKey="GESTYP" negateFilter="true"  filterValues="{AKA451_Filter}" fields="{document.fields}" as="XX_AK_A0359_AKA451" />


    <f:if condition="{GESTYP.0} == 'Teil einer fortlaufenden Zusammenstellung, Aufsatz (z.B. Zeitschrift)' ||
                 {GESTYP.0} == 'Begleitmaterial / Beilage'">
        <f:then>
            <dla:data.joinFieldArrays
                    arrays="{0:'{listview_additional1}'}"
                    fieldWraps="{0:'%s'}"
                    as="linkTexts"
            />
        </f:then>
        <f:else if="{GESTYP.0} == 'Teil einer monografischen Zusammenstellung, unselbständiges Stück'">
            <dla:data.joinFieldArrays
                    arrays="{0:'{XX_AK_TITREG_AKA451}',1:'{XX_AK_A0359_AKA451}',2:'{listview_additional1}', 3:'{USEIT}'}"
                    fieldWraps="{0:'%s',1:'\ %s', 2:'%s . - ', 3:'; %s'}"
                    as="linkTexts"
            />
        </f:else>
        <f:else>
            <dla:data.joinFieldArrays
                    arrays="{0:'{XX_AK_TITREG_AKA451}',1:'{USEIT}'}"
                    fieldWraps="{0:'%s',1:': %s'}"
                    as="linkTexts"
            />
        </f:else>
    </f:if>

    <div class="ctg-dtvt-label">
        Enthalten in
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{linkTexts}">
            <f:then>
                <f:for each="{linkTexts}" as="item" iteration="iterator">
                    <slub:data.fromSolr
                            query="A0001:(\"{AKA451.{iterator.index}}\")"
                    fields="id"
                    rows="10">
                    <f:then>
                        <f:link.action action="detail" arguments="{id:solr.id}" class="internal">
                            {item}
                        </f:link.action>
                    </f:then>
                    <f:else>
                        {item}
                    </f:else>
                    </slub:data.fromSolr>
                    <br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <dla:data.valueForKeyFiltered
            key="A0501"
            filterKey="AM501"
            filterValues="{0:'526n'}"
            fields="{document.fields}"
            as="A0501" />

    <div class="ctg-dtvt-label">
        Anmerkungen
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0501}">
            <f:then>
                <f:for each="{A0501}" as="item" iteration="iterator">
                    {item}<br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_KLASS_AUKEY')}" name="XX_AU_KLASS_AUKEY" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_STAND_AUKEY')}" name="XX_AU_STAND_AUKEY" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A01030')}" name="A01030" />
    <f:if condition="{XX_AU_KLASS_AUKEY} || {XX_AU_STAND_AUKEY}">
        <f:then>
            <v:variable.set value="{XX_AU_KLASS_AUKEY} {XX_AU_STAND_AUKEY}" name="usage" />
        </f:then>
        <f:else>
            <f:if condition="{A01030} == 'Virtuelle Aufnahme'">
                <v:variable.set value="nicht im Bestand des DLA" name="usage" />
            </f:if>
        </f:else>
    </f:if>

    <div class="ctg-dtvt-label">
        Benutzung
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{usage}">
            <f:then>{usage}</f:then>
            <f:else>-</f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_SIGNA_AUKEY')}" name="XX_AU_SIGNA_AUKEY" />

    <dla:data.joinFields
            fieldNames="{0:'XX_AU_SIGNA_AUKEY'}"
            fieldWraps="{0:'%s'}"
            fields="{document.fields}"
            as="linkTexts"
    />

    <div class="ctg-dtvt-label">
        Signatur
    </div>
    <div class="ctg-dtvt-content">
        Baustelle
        <f:if condition="{XX_AU_SIGNA_AUKEY}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'A0001',
                linkFieldContent:1,
                linkFacets:linkFacets
                linkTexts:linkTexts
              }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_WSIGNA_AUKEY')}" name="XX_AU_WSIGNA_AUKEY" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_PEU100_AUKEY')}" name="XX_AU_PEU100_AUKEY" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AU_FBTIT_AUKEY')}" name="XX_AU_FBTIT_AUKEY" />

    <div class="ctg-dtvt-label">
        Provenienz
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{XX_AU_WSIGNA_AUKEY} || {XX_AU_PEU100_AUKEY} || {XX_AU_FBTIT_AUKEY}">
            <f:then>
                <f:if condition="{XX_AU_WSIGNA_AUKEY}">
                    Bestand:
                    <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'XX_AU_WSIGNA_AUKEY',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        linkTexts:linkTexts
                      }"/>
                </f:if>

                <f:if condition="{XX_AU_PEU100_AUKEY}">
                    <br />
                    Vorbesitzer:
                    <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'XX_AU_PEU100_AUKEY',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        linkTexts:linkTexts
                      }"/>
                </f:if>

                <f:if condition="{XX_AU_FBTIT_AUKEY}">
                    <br />
                    <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'XX_AU_FBTIT_AUKEY',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        linkTexts:linkTexts
                      }"/>
                </f:if>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Sendeangaben
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_AU_SENDER_AUKEY')}">
            <f:render
                    partial="Display/Field/Inline"
                    arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:'XX_AU_SENDER_AUKEY',
                            separator:'; '
                    }"/>
        </f:if>
        <f:if condition="{s:data.valueForKey(array:document.fields, key:'XX_AU_SENDAT_AUKEY')}">
            <dla:data.dateFormat
                dateValue="{s:data.valueForKey(array:document.fields, key:'XX_AU_SENDAT_AUKEY')}"
                as="dateFormat"
            />
            <f:format.date date="{dateFormat}" format="d.m.Y"></f:format.date>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <f:comment>Digitales Objekt</f:comment>

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />
    <v:variable.set value="{0:'Volltext',
    1:'Langzeitarchivierung',
    2:'Veranstaltung bei \"Dichterlesen.net\" nachhören',
    3:'Zugang',
    4:'CD-ROM aufrufen'
    }" name="bemurlValues"/>

    <dla:data.valueForKeyFiltered key="AURL" filterKey="BEMURL" negateFilter="true" filterValues="{bemurlValues}" fields="{document.fields}" as="AURL" />
    <dla:data.valueForKeyFiltered key="BEMURL" filterKey="BEMURL" negateFilter="true" filterValues="{bemurlValues}" fields="{document.fields}" as="BEMURL" />

    <dla:data.joinFieldArrays
            arrays="{0:'{BEMURL}'}"
            fieldWraps="{0:'%s'}"
            as="digitalObject"
    />

    <div class="ctg-dtvt-label">
        Digitales Objekt
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{XX_MM_MOTITL_INDKEY} || {digitalObject} ">
            <f:then>
                <dla:data.joinFields
                        fieldNames="{0:'XX_MM_MOTITL_INDKEY'}"
                        fieldWraps="{0:'%s'}"
                        fields="{document.fields}"
                        as="linkTexts"
                />

                <f:render
                        partial="Display/Field/List"
                        arguments="{
                    document:document,
                    results:results,
                    field: 'INDKEY',
                    linkFieldContent:1,
                    linkFacets:linkFacets,
                    linkTexts:linkTexts
                  }"/>

                <f:for each="{digitalObject}" as="item" iteration="iterator">
                    <a href="{AURL.{iterator.index}}">{item}</a><br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <f:comment>Werk</f:comment>

    <dla:data.valueForKeyFiltered
            key="ATIT"
            filterKey="AMTIT"
            filterValues="{0:'303n'}"
            fields="{document.fields}"
            as="ATIT" />

    <div class="ctg-dtvt-label">
        Werk
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{ATIT}">
            <f:then>
                <f:for each="{ATIT}" as="item" iteration="iterator">
                    {item}<br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <dla:data.valueForKeyFiltered
            key="ATIT"
            filterKey="AMTIT"
            filterValues="{0:'303t'}"
            fields="{document.fields}"
            as="ATIT" />

    <div class="ctg-dtvt-label">
        Teilwerke
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{ATIT}">
            <f:then>
                <f:for each="{ATIT}" as="item" iteration="iterator">
                    {item}<br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <dla:data.valueForKeyFiltered
            key="ATIT"
            filterKey="AMTIT"
            filterValues="{0:'370n'}"
            fields="{document.fields}"
            as="ATIT" />

    <div class="ctg-dtvt-label">
        Weitere Titel
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{ATIT}">
            <f:then>
                <f:for each="{ATIT}" as="item" iteration="iterator">
                    {item}<br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'POS122')}" name="POS122" />

    <div class="ctg-dtvt-label">
        Sprache
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{POS122}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'POS122',
                linkFieldContent:0,
                linkFacets:linkFacets
              }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0038')}" name="A0038" />

    <div class="ctg-dtvt-label">
        Sprache Original
    </div>
    <div class="ctg-dtvt-content">

        <f:if condition="{A0038}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'A0038',
                linkFieldContent:1,
                linkFacets:linkFacets
              }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0407')}" name="A0407" />
    <div class="ctg-dtvt-label">
        Maßstab
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0407}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                        document:document,
                        results:results,
                        field:'A0407',
                        linkFieldContent:1,
                        linkFacets:linkFacets
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0431')}" name="A0431" />

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Register
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0431}">
            <f:then>
                <f:render
                    partial="Display/Field/List"
                    arguments="{
                        document:document,
                        results:results,
                        field:'A0431',
                        linkFieldContent:1,
                        linkFacets:linkFacets
                      }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>


<dla:data.valueForKeyFiltered
        key="A0501"
        filterKey="AM501"
        filterValues="{0:'517n'}"
        fields="{document.fields}"
        as="A0501" />

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Enthält
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{A0501}">
            <f:then>
                <f:for each="{A0501}" as="item" iteration="iterator">
                    {item}<br />
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>


<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Anmerkungen
    </div>
    <div class="ctg-dtvt-content">
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0654')}" name="A0654" />
        <f:if condition="{A0654}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                            document:document,
                            results:results,
                            field:'A0654',
                            linkFieldContent:linkFieldContent,
                            linkFacets:linkFacets
                          }"/>
            </f:then>
            <f:else>
            </f:else>
        </f:if>


        <f:comment>
            Anmerkungen (Hochschulschrift)
        </f:comment>
        <dla:data.valueForKeyFiltered
                key="A0501"
                filterKey="AM501"
                filterValues="{0:'519'}"
                fields="{document.fields}"
                as="A0501_a" />

        <dla:data.joinFields
                fieldNames="{0:'GHSART',1:'GHSNAM',3:'GHSDAT'}"
                fieldWraps="{0:'%s',1:', %s',2:', %s'}"
                fields="{document.fields}"
                as="altTextA0501"
        />
        <f:if condition="{A0501_a} || {altTextA0501}">
            <f:then>
                <f:if condition="{A0501_a}">
                    <f:then>
                        Hochschulschrift:
                        <f:for each="{A0501_a}" as="item" iteration="iterator">
                            {item}<br />
                        </f:for>
                    </f:then>
                    <f:else>
                        Hochschulschrift:
                        <f:for each="{altTextA0501}" as="item" iteration="iterator">
                            {item}<br />
                        </f:for>
                    </f:else>
                </f:if>
            </f:then>
            <f:else>
            </f:else>
        </f:if>

        <f:comment>
            Anmerkungen (Diverse A0501)
        </f:comment>
        <dla:data.valueForKeyFiltered
                key="A0501"
                filterKey="AM501"
                filterValues="{0:'526n',1:'517n',2:'519'}"
                negateFilter="true"
                fields="{document.fields}"
                as="A0501" />
        <f:if condition="{A0501}">
            <f:then>
                <f:for each="{A0501}" as="item" iteration="iterator">
                    {item}<br />
                </f:for>
            </f:then>
            <f:else>
            </f:else>
        </f:if>

        <f:if condition="{A0654} || {A0501_a} || {altTextA0501} || {A0501}">
            <f:then>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>


<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AK_TITREG_GWKEY')}" name="XX_AK_TITREG_GWKEY" />

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Werk
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{XX_AK_TITREG_GWKEY}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'GWKEY',
                linkFieldContent:1,
                linkFacets:linkFacets,
                linkTexts:XX_AK_TITREG_GWKEY
              }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>



<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AK_TITREG_AKE526')}" name="XX_AK_TITREG_AKE526" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AKE526')}" name="AKE526" />

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Teilwerke
    </div>
    <div class="ctg-dtvt-content">
        <f:if condition="{XX_AK_TITREG_AKE526}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'AKE526',
                linkFieldContent:1,
                linkFacets:linkFacets,
                linkTexts:XX_AK_TITREG_AKE526
              }"/>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>


<f:comment>
Für die Feldbenennung:
AKYTXT

    Für den Feldinhalt
    XX_AK_TITREG_AKY526


        Die Datensatzverknüpfung erfolgt nur in eine Richtung, die
    AKYTXT
    wird nicht in beiden Sätzen belegt,
        für die Anzeige im verknüpten Satz müssen die Werte aus
    IND526
    herangezogen werden,
        dafür wurde eine Mappingtabelle. Die Lösung sollte so implementiert werden,
        dass sie vom DLA weiter einfach weitergepflegt werden kann.
    </f:comment>

<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AKYTXT')}" name="AKYTXT" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AK_TITREG_AKY526')}" name="XX_AK_TITREG_AKY526" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AK_A0359_AKY526')}" name="XX_AK_A0359_AKY526" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_AK_listview_additional1_AKY526')}" name="XX_AK_listview_additional1_AKY526" />

    <f:for each="{AKYTXT}" as="labelItem" iteration="labelIterator">
        <div class="ctg-dtvt-row">
            <div class="ctg-dtvt-label">
                {labelItem}
            </div>
            <div class="ctg-dtvt-content">
                {XX_AK_TITREG_AKY526.{labelIterator.index}} / {XX_AK_A0359_AKY526.{labelIterator.index}} . - {XX_AK_listview_additional1_AKY526.{labelIterator.index}}
            </div>
        </div>
    </f:for>
<f:if condition="{XX_AK_TITREG_AKY526}">
</f:if>

<div class="ctg-dtvt-row">
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SE_REGTIT_SYNKEY')}" name="XX_SE_REGTIT_SYNKEY" />

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0712')}" name="A0712" />

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0750')}" name="A0750" />

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'POS114')}" name="POS114" />

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />
    <v:variable.set value="{0:'Rezension',
    1:'Inhaltstext',
    2:'Inhaltsverzeichnis'
}" name="bemurlValues"/>

    <dla:data.valueForKeyFiltered key="AURL" filterKey="BEMURL" filterValues="{bemurlValues}" fields="{document.fields}" as="AURL" />
    <dla:data.valueForKeyFiltered key="BEMURL" filterKey="BEMURL" negateFilter="true" filterValues="{bemurlValues}" fields="{document.fields}" as="BEMURL" />

    <dla:data.joinFieldArrays
            arrays="{0:'{BEMURL}'}"
            fieldWraps="{0:'%s'}"
            as="contentBemurl"
    />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'BEMURL')}" name="BEMURL" />
    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AURL')}" name="AURL" />

    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SE_TYP_SYNKEY')}" name="XX_SE_TYP_SYNKEY" />

    <div class="ctg-dtvt-label">
        Inhalt
    </div>
    <div class="ctg-dtvt-content">

        <f:if condition="{XX_SE_REGTIT_SYNKEY} || {A0712} || {POS114} || {contentBemurl}">
            <f:then>
                <f:for each="{XX_SE_TYP_SYNKEY}" as="typKey" iteration="iterator">
                    <f:if condition="{typKey} == 'Kette Bibliothek'">
                        <f:then>
                            {XX_SE_REGTIT_SYNKEY.{iterator.index}} <br />
                        </f:then>
                    </f:if>
                </f:for>

                <f:if condition="{A0750}">
                    <f:then>
                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field:'A0750',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        }"/>
                    </f:then>
                </f:if>

                <f:if condition="{A0712}">
                    <f:then>
                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field:'A0712',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        }"/>
                    </f:then>
                </f:if>

                <f:if condition="{POS114}">
                    <f:then>
                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field:'POS114',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        }"/>
                    </f:then>
                </f:if>


                <f:if condition="{contentBemurl}">
                    <f:then>
                        <f:for each="{contentBemurl}" as="item" iteration="iterator">
                            <a href="{AURL.{iterator.index}}">{item}</a><br />
                        </f:for>
                    </f:then>
                </f:if>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0711')}" name="A0711>" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'FREITX')}" name="FREITX" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SE_REGTIT_SYNKEY')}" name="XX_SE_REGTIT_SYNKEY" />
        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SE_TYP_SYNKEY')}" name="XX_SE_TYP_SYNKEY" />
<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
        Bibliographie
    </div>

    <div class="ctg-dtvt-content">
        <f:if condition="{A0711} || {AURL} || {XX_SE_REGTIT_SYNKEY}">
            <f:then>
                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'A0711',
                linkFieldContent:linkFieldContent,
                linkFacets:linkFacets
                }"/>

                <f:render
                        partial="Display/Field/List"
                        arguments="{
                document:document,
                results:results,
                field:'AURL',
                linkFieldContent:linkFieldContent,
                linkFacets:linkFacets
                }"/>

                <f:for each="{XX_SE_TYP_SYNKEY}" as="typKey" iteration="iterator">
                    <f:if condition="{typKey} == 'Bibliographie-Kette'">
                        <f:then>
                            {XX_SE_REGTIT_SYNKEY.{iterator.index}} <br />
                        </f:then>
                    </f:if>
                </f:for>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>





<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'AKA451')}" name="AKA451" />
<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0001')}" name="A0001" />

<dla:data.joinFieldArrays
        arrays="{0:'{XX_AK_TITREG_AKA451}',1:'{USEIT}'}"
        fieldWraps="{0:'%s',1:': %s'}"
        as="linkTexts"
/>


<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
    </div>
    <div class="ctg-dtvt-content">
        <slub:data.fromSolr
            query="AKA451:(\"{A0001}\")"
            fields="id"
            rows="1">
        <f:then>
            <s:data.newArray
                    name="includedContributionsQuery"
                    global="1"
                    keys="{0:'raw'}"
                    values="{0:'AKA451:{A0001}'}"
            />

            <f:link.action action="detail" arguments="{q:includedContributionsQuery}" class="internal">
                >Enthaltene Beiträge
                <v:variable.set value="true" name="includedContributions" />
            </f:link.action>
        </f:then>
        <f:else>
        </f:else>
        </slub:data.fromSolr>

        <f:if condition="{includedContributions}">
            <f:then>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>

<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
    </div>
    <div class="ctg-dtvt-content">
        <slub:data.fromSolr
                query="AKA451:(\"{A0001}\")"
        fields="id"
        rows="1">
        <f:then>
            <s:data.newArray
                    name="includedVolumesQuery"
                    global="1"
                    keys="{0:'raw'}"
                    values="{0:'AKA451:{A0001}'}"
            />

            <f:link.action action="detail" arguments="{q:includedVolumesQuery}" class="internal">
                >Enthaltene Bände
                <v:variable.set value="true" name="includedVolumes" />
            </f:link.action>
        </f:then>
        <f:else>
        </f:else>
        </slub:data.fromSolr>

        <f:if condition="{includedVolumes}">
            <f:then>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>


<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
    </div>
    <div class="ctg-dtvt-content">
        <slub:data.fromSolr
                query="AKY526:(\"{A0001}\")"
        fields="id"
        rows="1">
        <f:then>
            <s:data.newArray
                    name="reviewsQuery"
                    global="1"
                    keys="{0:'raw'}"
                    values="{0:'AKY526:{A0001}'}"
            />

            <f:link.action action="detail" arguments="{q:reviewsQuery}" class="internal">
                >Rezensionen
                <v:variable.set value="true" name="reviews" />
            </f:link.action>
        </f:then>
        <f:else>
        </f:else>
        </slub:data.fromSolr>

        <f:if condition="{reviews}">
            <f:then>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>



<div class="ctg-dtvt-row">
    <div class="ctg-dtvt-label">
    </div>
    <div class="ctg-dtvt-content">
        <slub:data.fromSolr
                query="AKA451:(\"{A0001}\")"
        fields="id"
        rows="1">
        <f:then>
            <s:data.newArray
                    name="volumesBookletsQuery"
                    global="1"
                    keys="{0:'raw'}"
                    values="{0:'AKA451:{A0001}'}"
            />

            <f:link.action action="detail" arguments="{q:volumesBookletsQuery}" class="internal">
                >Bände und Hefte
                <v:variable.set value="true" name="volumesBooklets" />
            </f:link.action>
        </f:then>
        <f:else>
        </f:else>
        </slub:data.fromSolr>

        <f:if condition="{volumesBooklets}">
            <f:then>
            </f:then>
            <f:else>
                -
            </f:else>
        </f:if>
    </div>
</div>


<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0001')}" name="A0001" />
<dt class="dt-{field}">
    Beziehungen
</dt>
<dd class="dd-{field}">

    <s:data.newArray
            name="query"
            global="1"
            keys="{0:'raw', 1:'phrase'}"
            values="{0:'AKA451:(\'{A0001}\') AND GESTYP:(\'Einzelbestandteil \/ unselbständiges Werk\')', 1:1}"
    />

    <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
        <span style="color:lightgrey;">Enthaltene Beiträge</span>
        <f:render
                partial="Display/Field/Inline"
                arguments="{
                          config:config,
                          results:results,
                          document:solr,
                          field:'{displayField}'
                        }"/>
    </f:link.action>
</dd>

<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0001')}" name="A0001" />
<dt class="dt-{field}">
    Beziehungen
</dt>
<dd class="dd-{field}">

    <s:data.newArray
            name="query"
            global="1"
            keys="{0:'raw', 1:'phrase'}"
            values="{0:'AKA451:\'{A0001}\' AND (\'Mehrteilige Monografie \/ nicht Teil eines Gesamtwerks\' OR \'Mehrteilige Monografie / Teil eines Gesamtwerks\' OR \'Fortlaufende Ressource / Serie, Reihe\')', 1:1}"
    />

    <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
        <span style="color:lightgrey;">Enthaltene Bände</span>
        <f:render
                partial="Display/Field/Inline"
                arguments="{
                          config:config,
                          results:results,
                          document:solr,
                          field:'{displayField}'
                        }"/>
    </f:link.action>
</dd>

<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0001')}" name="A0001" />
<dt class="dt-{field}">
    Beziehungen
</dt>
<dd class="dd-{field}">

    <s:data.newArray
            name="query"
            global="1"
            keys="{0:'raw', 1:'phrase'}"
            values="{0:'AKY526:\'{A0001}\' AND NOT AKYTXT\:\'Bezug: Rezension von\'', 1:1}"
    />

    <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
        <span style="color:lightgrey;">Suche nach Rezensionen</span>
        <f:render
                partial="Display/Field/Inline"
                arguments="{
                          config:config,
                          results:results,
                          document:solr,
                          field:'{displayField}'
                        }"/>
    </f:link.action>
</dd>