{namespace v=FluidTYPO3\vhs\ViewHelpers}
{namespace slub=Slub\SlubFindExtend\ViewHelpers}
{namespace dla=Dla\DlaOpacNg\ViewHelpers}
{namespace s=Subugoe\Find\ViewHelpers}


<f:comment>Digitales Objekt</f:comment>

<v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_MM_MOTITL_INDKEY')}" name="XX_MM_MOTITL_INDKEY" />
<v:variable.set value="{0:'Volltext',
    1:'Langzeitarchivierung',
    2:'Veranstaltung bei \"Dichterlesen.net\" nachhÃ¶ren',
3:'Zugang',
4:'CD-ROM aufrufen'
}" name="bemurlValues"/>

<dla:data.valueForKeyFiltered key="AURL" filterKey="BEMURL" filterValues="{bemurlValues}" fields="{document.fields}" as="AURL" />
<dla:data.valueForKeyFiltered key="BEMURL" filterKey="BEMURL" filterValues="{bemurlValues}" fields="{document.fields}" as="BEMURL" />

<dla:data.joinFieldArrays
        arrays="{0:'{AURL}',1:'{BEMURL}'}"
        fieldWraps="{0:'%s',1:'(%s)'}"
        as="digitalObject"
/>

<div class="ctg-dtvt-label">
    Digitales Objekt
</div>
<div class="ctg-dtvt-content">

    <f:if condition="{XX_MM_MOTITL_INDKEY} || {digitalObject} ">
        <f:then>
            <dla:data.joinFields
                fieldNames="{0:'XX_MM_MOTITL_INDKEY'}"
                fieldWraps="{0:'%s'}"
                fields="{document.fields}"
                as="linkTexts"
            />

            <f:render
                    partial="Display/Field/List"
                    arguments="{
                    document:document,
                    results:results,
                    field: 'INDKEY',
                    linkFieldContent:1,
                    linkFacets:linkFacets,
                    linkTexts:linkTexts
                  }"/>

            <f:for each="{digitalObject}" as="item" iteration="iterator">
                <a href="{AURL.{iterator.index}}">{item}</a><br />
            </f:for>
        </f:then>
        <f:else>
            -
        </f:else>
    </f:if>
</div>
