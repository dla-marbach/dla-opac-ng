{namespace v=FluidTYPO3\vhs\ViewHelpers}
{namespace slub=Slub\SlubFindExtend\ViewHelpers}
{namespace dla=Dla\DlaOpacNg\ViewHelpers}
{namespace s=Subugoe\Find\ViewHelpers}


<div class="ctg-detailview-head">
    <div class="ctg-dvh-main">
        <div class="ctg-ri-icon">
            <f:render partial="Display/Detail/MediatypeIcon" arguments="{listview_type:document.listview_type, listview_type_cardinality:document.listview_type_cardinality}" />
        </div>
        <div class="ctg-ri-text">
            <h2>
                <f:render
                        partial="Display/Field/Inline"
                        arguments="{
                        config:config,
                        results:results,
                        document:document,
                        field:settings.standardFields.listview_title,
                        separator:''
                    }"/>
            </h2>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_associate,
                            separator:'; '
                    }"/>
                </f:if>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">,</f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional1)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional1,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional2)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional2,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
        </div>
        <div class="ctg-ri-image">

        </div>
    </div>

    <f:render partial="Display/Detail/DetailButtons" arguments="{_all}"/>
</div>

<f:comment>
    <div class="ctg-detailview-media">
        <img src="Start%20-%20DLA%20Marbach-Dateien/platzhalter-bild.jpg" alt="">
    </div>
</f:comment>

<div class="ctg-detailview-tabs">


    <div class="ctg-dtvt-details">

        <input type="checkbox" class="ctg-hackbox ctg-readmore" id="ctg-readmore-now">
        <label class="ctg-readmore ctg-button ctg-button-textnicon" for="ctg-readmore-now">weitere Details</label>
        <span class="ctg-readmore-content">

            <div class="ctg-dtvt-row">
                <div class="ctg-dtvt-label">
                    <f:translate key='Medienart' extensionName='dla_opac_ng'/>
                </div>
                <div class="ctg-dtvt-content">
                    <f:render
                            partial="Display/Field/List"
                            arguments="{
                        document:document,
                        results:results,
                        field:'listview_type',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                      }"/>
                </div>
            </div>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TYP')}" name="TYP" />
            <f:if condition="{TYP}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            Typ
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                    document:document,
                                    results:results,
                                    field:'TYP',
                                    linkFieldContent:linkFieldContent,
                                    linkFacets:linkFacets
                            }"/>
                        </div>
                    </div>
                </f:then>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'NOTAT')}" name="NOTAT" />
            <f:if condition="{NOTAT}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            Notation
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                    document:document,
                                    results:results,
                                    field:'NOTAT',
                                    linkFieldContent:linkFieldContent,
                                    linkFacets:linkFacets
                            }"/>
                        </div>
                    </div>
                </f:then>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TITEL')}" name="TITEL" />
            <f:if condition="{TITEL}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            Benennung
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                    document:document,
                                    results:results,
                                    field:'TITEL',
                                    linkFieldContent:linkFieldContent,
                                    linkFacets:linkFacets
                            }"/>
                        </div>
                    </div>
                </f:then>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'REGTIT')}" name="REGTIT" />
            <f:if condition="{REGTIT}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            Registerform
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                    document:document,
                                    results:results,
                                    field:'REGTIT',
                                    linkFieldContent:linkFieldContent,
                                    linkFacets:linkFacets
                            }"/>
                        </div>
                    </div>
                </f:then>
            </f:if>


            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'VORKOP')}" name="VORKOP" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SY_TITEL_VORKOP')}" name="XX_SY_TITEL_VORKOP" />

                <f:if condition="{VORKOP}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                Übergeordnete Systemstelle
                            </div>
                            <div class="ctg-dtvt-content">
                                <f:link.action action="detail" arguments="{id: 'SY{VORKOP}'}">
                                    {XX_SY_TITEL_VORKOP}
                                </f:link.action>
                                <br/>
                            </div>
                        </div>
                    </f:then>
                </f:if>


            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'NACKOP')}" name="NACKOP" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SY_TITEL_NACKOP')}" name="XX_SY_TITEL_NACKOP" />

            <f:if condition="{NACKOP}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            Untergeordnete Systemstelle
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:link.action action="detail" arguments="{id: 'SY{NACKOP}'}">
                                {XX_SY_TITEL_NACKOP}
                            </f:link.action>
                            <br/>
                        </div>
                    </div>
                </f:then>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'SIEKOP')}" name="SIEKOP" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'XX_SY_TITEL_SIEKOP')}" name="XX_SY_TITEL_SIEKOP" />

            <f:for each="{XX_SY_TITEL_SIEKOP}" as="item" iteration="iterator">
                <f:if condition="{SIEKOP.{iterator.index}}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                Siehe auch
                            </div>
                            <div class="ctg-dtvt-content">
                                <f:link.action action="detail" arguments="{id: 'SY{SIEKOP.{iterator.index}}'}">
                                    {item}
                                </f:link.action>
                                <br/>
                            </div>
                        </div>
                    </f:then>
                </f:if>
            </f:for>

        </span>

        <div class="ctg-detailview-teaser">
            <section>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'listview_title')}" name="box_title" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'SYISN')}" name="SYISN" />

                <article>
                    <i><strong>von</strong> {box_title} ...</i>
                    <ul class="list-links">


                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_fs_systematikketten'}"
                                values="{0:'{SYISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Systematikketten ({solrcount})
                            </f:link.action>
                        </li>

                        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'NOTAT')}" name="NOTAT" />

                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_fs_pnormdaten'}"
                                values="{0:'{NOTAT}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Personennormsätzen ({solrcount})
                            </f:link.action>
                        </li>

                        <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'NOTAT')}" name="NOTAT" />
                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_fs_ksnormdaten'}"
                                values="{0:'{NOTAT}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Körperschaftsnormsätzen ({solrcount})
                            </f:link.action>
                        </li>

                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_fs_autorenschemaketten'}"
                                values="{0:'{SYISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Autorenschemaketten ({solrcount})
                            </f:link.action>
                        </li>

                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_fs_bibliographieketten'}"
                                values="{0:'{SYISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Bibliographieketten ({solrcount})
                            </f:link.action>
                        </li>


                    </ul>
                </article>

                <article class="ctg-detail-showall">
                    <span class="icon bel-frage"></span> Nicht die richtige Kategorie dabei?

                    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'SYISN')}" name="SYISN" />
                    <s:data.newArray
                            name="query"
                            global="1"
                            keys="{0:'detail_fs_all'}"
                            values="{0:{0:'{SYISN}', 1:'{NOTAT}'}}"
                    />
                    <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                    <dla:countFromSolr query="{solvedQuery}" />

                    <f:link.action action="index" arguments="{q:query}" noCacheHash="1" class="ctg-button ctg-button-textnicon" title="alles zu dieser Systematik">
                        alles zu dieser Systematik ({solrcount})
                    </f:link.action>

                </article>

                <!--
                <article>
                    <i><strong>andere Fundorte</strong></i>
                    <ul class="list-links">
                        <li><a title=""><span class="icon bel-link03"></span></a> <a title="">Wikipedia "Friedrich Stiller"</a></li>
                        <li><a title=""><span class="icon bel-link03"></span></a> <a title="">Wikipedia "Stiller"</a></li>
                        <li><a title=""><span class="icon bel-link03"></span></a> <a title="">Webarchive "Stiller, Friedrich"</a></li>
                    </ul>
                </article>
                -->
            </section>

        </div>

    </div>
</div>