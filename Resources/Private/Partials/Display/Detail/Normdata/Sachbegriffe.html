{namespace v=FluidTYPO3\vhs\ViewHelpers}
{namespace slub=Slub\SlubFindExtend\ViewHelpers}
{namespace dla=Dla\DlaOpacNg\ViewHelpers}
{namespace s=Subugoe\Find\ViewHelpers}


<div class="ctg-detailview-head">
    <div class="ctg-dvh-main">
        <div class="ctg-ri-icon">
            <f:render partial="Display/Detail/MediatypeIcon" arguments="{listview_type:document.listview_type, listview_type_cardinality:document.listview_type_cardinality}" />
        </div>
        <div class="ctg-ri-text">
            <h2>
                <f:render
                        partial="Display/Field/Inline"
                        arguments="{
                        config:config,
                        results:results,
                        document:document,
                        field:settings.standardFields.listview_title,
                        separator:''
                    }"/>
            </h2>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_associate,
                            separator:'; '
                    }"/>
                </f:if>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_associate)}">,</f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional1)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional1,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
            <p>
                <f:if condition="{s:data.valueForKey(array:document.fields, key:settings.standardFields.listview_additional2)}">
                    <f:render
                            partial="Display/Field/Inline"
                            arguments="{
                            config:config,
                            results:results,
                            document:document,
                            field:settings.standardFields.listview_additional2,
                            separator:'; '
                    }"/>
                </f:if>
            </p>
        </div>
        <div class="ctg-ri-image">

        </div>
    </div>

    <ul class="ctg-dvh-aside">
        <li><a class="ctg-button" title="<f:translate key='merken' extensionName='dla_opac_ng'/>"><span class="icon bel-stern01"></span></a></li>
        <li><a class="ctg-button" title="<f:translate key='versenden' extensionName='dla_opac_ng'/>"><span class="icon bel-brief01"></span></a></li>
        <li><a class="ctg-button" title="<f:translate key='teilen' extensionName='dla_opac_ng'/>"><span class="icon bel-link01"></span></a></li>
        <li><a class="ctg-button" title="<f:translate key='exportieren' extensionName='dla_opac_ng'/>"><span class="icon bel-postin"></span></a></li>
    </ul>
</div>

<f:comment>
    <div class="ctg-detailview-media">
        <img src="Start%20-%20DLA%20Marbach-Dateien/platzhalter-bild.jpg" alt="">
    </div>
</f:comment>

<div class="ctg-detailview-tabs">


    <div class="ctg-dtvt-details">

        <input type="checkbox" class="ctg-hackbox ctg-readmore" id="ctg-readmore-now">
        <label class="ctg-readmore ctg-button ctg-button-textnicon" for="ctg-readmore-now">weitere Details</label>
        <span class="ctg-readmore-content">

            <div class="ctg-dtvt-row">
                <div class="ctg-dtvt-label">
                    <f:translate key='Medienart' extensionName='dla_opac_ng'/>
                </div>
                <div class="ctg-dtvt-content">
                    <f:render
                            partial="Display/Field/List"
                            arguments="{
                        document:document,
                        results:results,
                        field:'listview_type',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                      }"/>
                </div>
            </div>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'SWVF')}" name="SWVF" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TYPMT')}" name="TYPMT" />
            <f:if condition="{TYPMT}">
                <f:then>
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            {TYPMT}
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:render
                                    partial="Display/Field/List"
                                    arguments="{
                                    document:document,
                                    results:results,
                                    field:'SWVF',
                                    linkFieldContent:linkFieldContent,
                                    linkFacets:linkFacets
                            }"/>
                        </div>
                    </div>
                </f:then>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TI808')}" name="TI808" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'T0808')}" name="T0808" />
            <f:for each="{T0808}" as="item" iteration="iterator">
                <f:if condition="{TI808.{iterator.index}}=='Definition'">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                Definition
                            </div>
                            <div class="ctg-dtvt-content">
                                {item}
                                <br/>
                            </div>
                        </div>
                    </f:then>
                </f:if>
            </f:for>


            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TA811')}" name="TA811" />
            <f:for each="{TA811}" as="item" iteration="iterator">
                <f:if condition="{TA811}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                Land
                            </div>
                            <div class="ctg-dtvt-content">
                                {item}
                                <br/>
                            </div>
                        </div>
                    </f:then>
                </f:if>
            </f:for>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'T0812')}" name="T0812" />
            <f:for each="{T0812}" as="item" iteration="iterator">
                <f:if condition="{T0812}">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                Sprache
                            </div>
                            <div class="ctg-dtvt-content">
                                {item}
                                <br/>
                            </div>
                        </div>
                    </f:then>
                </f:if>
            </f:for>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'ZEITVO')}" name="ZEITVO" />
            <f:if condition="{ZEITVO}">
                <div class="ctg-dtvt-row">
                    <div class="ctg-dtvt-label">
                        Zeit
                    </div>
                    <div class="ctg-dtvt-content">
                        <f:render
                                partial="Display/Field/List"
                                arguments="{
                        document:document,
                        results:results,
                        field:'ZEITVO',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        }"/>
                         -
                        <f:render
                            partial="Display/Field/List"
                            arguments="{
                        document:document,
                        results:results,
                        field:'ZEITBI',
                        linkFieldContent:linkFieldContent,
                        linkFacets:linkFacets
                        }"/>
                    </div>
                </div>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_relation_type')}" name="detail_relation_type" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_relation_title')}" name="detail_relation_title" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_relation_ids')}" name="detail_relation_ids" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'detail_relation_comment')}" name="detail_relation_comment" />

            <f:if condition="{detail_relation_type}">

                <f:for each="{detail_relation_type}" as="item" iteration="iterator">
                    <div class="ctg-dtvt-row">
                        <div class="ctg-dtvt-label">
                            {item}
                        </div>
                        <div class="ctg-dtvt-content">
                            <f:if condition="{detail_relation_title.{iterator.index}}">
                                <f:then>
                                    <f:link.action action="detail" arguments="{id:'{detail_relation_ids.{iterator.index}}'}">
                                        {detail_relation_title.{iterator.index}}
                                        <f:if condition="{detail_relation_comment.{iterator.index}}!='␞'">
                                            ({detail_relation_comment.{iterator.index}})
                                        </f:if>
                                    </f:link.action>
                                </f:then>
                                <f:else>
                                    {detail_relation_title.{iterator.index}}
                                    <f:if condition="{detail_relation_comment.{iterator.index}}!='␞'">
                                        ({detail_relation_comment.{iterator.index}})
                                    </f:if>
                                </f:else>
                            </f:if>

                        </div>
                    </div>
                </f:for>
            </f:if>

            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'T0808')}" name="T0808" />
            <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'TI808')}" name="TI808" />

            <f:for each="{T0808}" as="item" iteration="iterator">
                <f:if condition="{TI808.{iterator.index}}=='Quelle'">
                    <f:then>
                        <div class="ctg-dtvt-row">
                            <div class="ctg-dtvt-label">
                                Quelle
                            </div>
                            <div class="ctg-dtvt-content">
                                {item}
                                <br/>
                            </div>
                        </div>
                    </f:then>
                </f:if>
            </f:for>


        </span>

        <div class="ctg-detailview-teaser">
            <section>

                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'listview_title')}" name="box_title" />
                <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'THSISN')}" name="THSISN" />

                <article>
                    <i><strong>Schlagwort</strong> {box_title} ...</i>
                    <ul class="list-links">


                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_sb_schlagwort_gedrucktes'}"
                                values="{0:'{THSISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Gedrucktes ({solrcount})
                            </f:link.action>
                        </li>


                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_sb_schlagwort_bundo'}"
                                values="{0:'{THSISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Bilder und Objekte ({solrcount})
                            </f:link.action>
                        </li>


                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_sb_schlagwort_handschriften'}"
                                values="{0:'{THSISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Handschriften ({solrcount})
                            </f:link.action>
                        </li>

                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_sb_schlagwort_aundv'}"
                                values="{0:'{THSISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Audio und Video ({solrcount})
                            </f:link.action>
                        </li>

                        <s:data.newArray
                                name="query"
                                global="1"
                                keys="{0:'detail_sb_schlagwort_bestaende'}"
                                values="{0:'{THSISN}'}"
                        />
                        <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                        <dla:countFromSolr query="{solvedQuery}" />

                        <li>
                            <f:link.action action="index" arguments="{q:query}" class="internal" noCacheHash="1">
                                Bestände ({solrcount})
                            </f:link.action>
                        </li>


                    </ul>
                </article>

                <article class="ctg-detail-showall">
                    <span class="icon bel-frage"></span> Nicht die richtige Kategorie dabei?

                    <v:variable.set value="{s:data.valueForKey(array:document.fields, key:'A0001')}" name="A0001" />
                    <s:data.newArray
                            name="query"
                            global="1"
                            keys="{0:'detail_sb_all'}"
                            values="{0:'{THSISN}'}"
                    />
                    <dla:solveQuery array="{query}" as="solvedQuery" settings="{settings}" />
                    <dla:countFromSolr query="{solvedQuery}" />

                    <f:link.action action="index" arguments="{q:query}" noCacheHash="1" class="ctg-button ctg-button-textnicon" title="alles zu diesem Schlagwort">
                        alles zu diesem Schlagwort ({solrcount})
                    </f:link.action>

                </article>

                <!--
                <article>
                    <i><strong>andere Fundorte</strong></i>
                    <ul class="list-links">
                        <li><a title=""><span class="icon bel-link03"></span></a> <a title="">Wikipedia "Friedrich Stiller"</a></li>
                        <li><a title=""><span class="icon bel-link03"></span></a> <a title="">Wikipedia "Stiller"</a></li>
                        <li><a title=""><span class="icon bel-link03"></span></a> <a title="">Webarchive "Stiller, Friedrich"</a></li>
                    </ul>
                </article>
                -->
            </section>

        </div>

    </div>
</div>